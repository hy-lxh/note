
        <!DOCTYPE html>
         <html lang="en">
         <head>
	     <meta charset="UTF-8">
         <meta name="keywords" content="nodejs基础,博客,前端"/>
         <meta name="description" content="nodejs简单笔记"/>
         <!--<meta http-equiv="content-security-policy" content="default-src self"/>-->
	     <title>nodejs基础</title>
        </head>
        <link rel="stylesheet" href="../main.css">
        <body>
        <div class="message_box"></div>
        <div class="content">
           <div id="view">
              <div>
                <div class="bs_content">
                   <h2 id='一、nodejs笔记' class='Kf510464'>一、nodejs笔记</h2><h3 id='1.1 请求服务器' class='DH077096'>1.1 请求服务器</h3><h4 id='1.1.1 get请求' class='Kf731827'>1.1.1 get请求</h4><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div class='indexPre'><div class='index'>1.</div><div class='index'>2.</div><div class='index'>3.</div><div class='index'>4.</div><div class='index'>5.</div><div class='index'>6.</div><div class='index'>7.</div><div class='index'>8.</div><div class='index'>9.</div><div class='index'>10.</div><div class='index'>11.</div><div class='index'>12.</div><div class='index'>13.</div><div class='index'>14.</div><div class='index'>15.</div></div><div class="codePre"><code data-key='xmp'><span class="let">const </span>https <span class="let">=</span> <span class="title">require<span class="log">(</span></span><span class="string">"https"</span><span class="log">)</span>;</code><code data-key='xmp'>https<span class="log">.</span><span class="title1">get</span><span class="log">(</span>url,options,res<span class="log"> =></span><span class="log">{</span></code><code data-key='xmp'><span class="let">  let </span>str <span class="let">=</span> "";</code><code data-key='xmp'>  res<span class="log">.</span><span class="title1">on</span><span class="log">(</span><span class="string">"data"</span>,chunk<span class="log"> => </span><span class="log">{</span></code><code data-key='xmp'>    <span class="green">//数据传输中</span></code><code data-key='xmp'>    str <span class="let">+</span><span class="let">=</span> chunk;</code><code data-key='xmp'>  <span class="log">}</span><span class="log">)</span>;</code><code data-key='xmp'>  res<span class="log">.</span><span class="title1">on</span><span class="log">(</span><span class="string">"end"</span>,<span class="log">(</span><span class="log">)</span><span class="log"> => </span><span class="log">{</span></code><code data-key='xmp'>    <span class="green">//数据传输完毕</span></code><code data-key='xmp'>    console<span class="log">.</span><span class="title1">log</span><span class="log">(</span>str<span class="log">)</span>;</code><code data-key='xmp'>  <span class="log">}</span><span class="log">)</span>;</code><code data-key='xmp'>  res<span class="log">.</span><span class="title1">on</span><span class="log">(</span><span class="string">"error"</span>,err<span class="log"> => </span><span class="log">{</span></code><code data-key='xmp'>    console<span class="log">.</span><span class="title1">log</span><span class="log">(</span><span class="string">"报错了"</span><span class="log">)</span>;</code><code data-key='xmp'>  <span class="log">}</span><span class="log">)</span>;</code><code data-key='xmp'><span class="log">}</span><span class="log">)</span></code></div></pre><h4 id='1.1.2 post请求' class='Gh546306'>1.1.2 post请求</h4><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div class='indexPre'><div class='index'>1.</div><div class='index'>2.</div><div class='index'>3.</div><div class='index'>4.</div><div class='index'>5.</div><div class='index'>6.</div><div class='index'>7.</div><div class='index'>8.</div><div class='index'>9.</div><div class='index'>10.</div><div class='index'>11.</div><div class='index'>12.</div><div class='index'>13.</div><div class='index'>14.</div><div class='index'>15.</div><div class='index'>16.</div><div class='index'>17.</div><div class='index'>18.</div><div class='index'>19.</div><div class='index'>20.</div><div class='index'>21.</div><div class='index'>22.</div><div class='index'>23.</div><div class='index'>24.</div><div class='index'>25.</div></div><div class="codePre"><code data-key='xmp'><span class="let">const </span>https <span class="let">=</span> <span class="title">require<span class="log">(</span></span><span class="string">"https"</span><span class="log">)</span>;</code><code data-key='xmp'><span class='let'>function</span> <span class="title">post<span class="log">(</span></span>options,data<span class="log">)</span><span class="log">{</span></code><code data-key='xmp'>  <span class="let">return</span><span class="let"> new </span><span class="title">Promise<span class="log">(</span></span><span class="log">(</span>resolve,reject<span class="log">)</span><span class="log"> => </span><span class="log">{</span></code><code data-key='xmp'><span class="let">    const </span>req <span class="let">=</span> https<span class="log">.</span><span class="title1">request</span><span class="log">(</span>options,res<span class="log"> => </span><span class="log">{</span></code><code data-key='xmp'><span class="let">     let </span>str <span class="let">=</span> "";</code><code data-key='xmp'>     res<span class="log">.</span><span class="title1">on</span><span class="log">(</span><span class="string">"data"</span>,chunck<span class="log"> => </span>str <span class="let">+</span><span class="let">=</span> chunck<span class="log">)</span>;</code><code data-key='xmp'>     res<span class="log">.</span><span class="title1">on</span><span class="log">(</span><span class="string">"end"</span>,<span class="log">(</span><span class="log">)</span><span class="log"> => </span><span class="title">resolve<span class="log">(</span></span>JSON<span class="log">.</span><span class="title1">parse</span><span class="log">(</span>str<span class="log">)</span><span class="log">)</span><span class="log">)</span>;</code><code data-key='xmp'>     res<span class="log">.</span><span class="title1">on</span><span class="log">(</span><span class="string">"error"</span>,err<span class="log"> => </span><span class="title">reject<span class="log">(</span></span>err<span class="log">)</span><span class="log">)</span>;</code><code data-key='xmp'>   <span class="log">}</span><span class="log">)</span>;</code><code data-key='xmp'>   req<span class="log">.</span><span class="title1">on</span><span class="log">(</span><span class="string">"error"</span>,err<span class="log"> => </span><span class="title">reject<span class="log">(</span></span>err<span class="log">)</span><span class="log">)</span>;</code><code data-key='xmp'>   req<span class="log">.</span><span class="title1">write</span><span class="log">(</span>data<span class="log">)</span>;</code><code data-key='xmp'>   req<span class="log">.</span><span class="title1">end</span><span class="log">(</span><span class="log">)</span>;</code><code data-key='xmp'>  <span class="log">}</span><span class="log">)</span>;</code><code data-key='xmp'><span class="log">}</span></code><code data-key='xmp'><span class="green">//options格式</span></code><code data-key='xmp'><span class="let">const </span>options <span class="let">=</span> <span class="log">{</span></code><code data-key='xmp'>  hostname: <span class="string">"api.weixin.qq.com"</span>,<span class="green">//请求url的host</span></code><code data-key='xmp'>  port: 443,<span class="green">//请求端口 https 443 http 80</span></code><code data-key='xmp'>  path<span class="colonColor">: </span><span class="typeColor">`/wxa/business/getuserphonenumber?access_token</span>=$<span class="log">{</span>accessToken<span class="log">}</span>`,<span class="green">//url中host后面部分</span></code><code data-key='xmp'>  method: <span class="string">"POST"</span>,<span class="green">//请求方法</span></code><code data-key='xmp'>  headers: <span class="log">{</span><span class="green">//请求头</span></code><code data-key='xmp'>    <span class="string">"Content-Type"</span>: <span class="string">"application/json"</span></code><code data-key='xmp'>  <span class="log">}</span></code><code data-key='xmp'><span class="log">}</span>;</code><code data-key='xmp'><span class="green">//data就传一个对象就好了</span></code></div></pre><h3 id='1.2 fs模块操作' class='gh535542'>1.2 fs模块操作</h3><h4 id='1.2.1 常用api' class='ah943564'>1.2.1 常用api</h4><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div class='indexPre'><div class='index'>1.</div><div class='index'>2.</div><div class='index'>3.</div><div class='index'>4.</div><div class='index'>5.</div><div class='index'>6.</div><div class='index'>7.</div><div class='index'>8.</div><div class='index'>9.</div><div class='index'>10.</div><div class='index'>11.</div><div class='index'>12.</div><div class='index'>13.</div><div class='index'>14.</div><div class='index'>15.</div><div class='index'>16.</div><div class='index'>17.</div><div class='index'>18.</div><div class='index'>19.</div><div class='index'>20.</div><div class='index'>21.</div><div class='index'>22.</div><div class='index'>23.</div><div class='index'>24.</div><div class='index'>25.</div><div class='index'>26.</div><div class='index'>27.</div><div class='index'>28.</div><div class='index'>29.</div><div class='index'>30.</div><div class='index'>31.</div><div class='index'>32.</div><div class='index'>33.</div><div class='index'>34.</div><div class='index'>35.</div><div class='index'>36.</div><div class='index'>37.</div><div class='index'>38.</div><div class='index'>39.</div><div class='index'>40.</div><div class='index'>41.</div><div class='index'>42.</div></div><div class="codePre"><code data-key='xmp'><span class="let">const </span>fs <span class="let">=</span> <span class="title">require<span class="log">(</span></span><span class="string">"fs"</span><span class="log">)</span>;</code><code data-key='xmp'><span class="green">//判断文件是否存在</span></code><code data-key='xmp'><span class="green">//同步 </span></code><code data-key='xmp'><span class="let">const </span>exist <span class="let">=</span> fs<span class="log">.</span><span class="title1">existsSync</span><span class="log">(</span><span class="string">"文件夹的绝对路径"</span><span class="log">)</span>;</code><code data-key='xmp'>console<span class="log">.</span><span class="title1">log</span><span class="log">(</span>exist<span class="let"> ? </span><span class="string">"存在文件"</span><span class="let"> : </span><span class="string">"不存在文件"</span><span class="log">)</span>;</code><code data-key='xmp'><span class="green">//异步 </span></code><code data-key='xmp'>fs<span class="log">.</span><span class="title1">exists</span><span class="log">(</span><span class="string">"文件夹的绝对路径"</span>,<span class="log">(</span>exist<span class="log">)</span><span class="log"> => </span><span class="log">{</span></code><code data-key='xmp'>   <span class="title"><span class="let">if</span><span class="log">(</span></span>exist<span class="log">)</span><span class="log">{</span></code><code data-key='xmp'>     console<span class="log">.</span><span class="title1">log</span><span class="log">(</span><span class="string">"存在文件夹或者文件"</span><span class="log">)</span></code><code data-key='xmp'>   <span class="log">}</span><span class="let">else</span><span class="log">{</span></code><code data-key='xmp'>     console<span class="log">.</span><span class="title1">log</span><span class="log">(</span><span class="string">"不存在文件夹或者文件"</span><span class="log">)</span>;</code><code data-key='xmp'>   <span class="log">}</span></code><code data-key='xmp'><span class="log">}</span><span class="log">)</span>;</code><code data-key='xmp'> </code><code data-key='xmp'><span class="green">//创建文件夹</span></code><code data-key='xmp'><span class="green">//同步</span></code><code data-key='xmp'>fs<span class="log">.</span><span class="title1">mkdirSync</span><span class="log">(</span><span class="string">"文件夹绝对路径"</span><span class="log">)</span>;</code><code data-key='xmp'> </code><code data-key='xmp'><span class="green">//获取文件夹目录</span></code><code data-key='xmp'><span class="let">const </span>dirs <span class="let">=</span> fs<span class="log">.</span><span class="title1">readdirSync</span><span class="log">(</span><span class="string">"文件夹绝对路径"</span><span class="log">)</span>;</code><code data-key='xmp'><span class="green">//dirs是一个数组,就是传入文件夹中的所有文件和文件夹</span></code><code data-key='xmp'> </code><code data-key='xmp'><span class="green">//判断文件类型</span></code><code data-key='xmp'><span class="let">const </span>type <span class="let">=</span> fs<span class="log">.</span><span class="title1">statSync</span><span class="log">(</span><span class="string">"文件绝对路径"</span><span class="log">)</span>;</code><code data-key='xmp'>type<span class="log">.</span><span class="title1">isDirectory</span><span class="log">(</span><span class="log">)</span>;<span class="green">//返回true就是文件夹,返回false就是文件</span></code><code data-key='xmp'>type<span class="log">.</span><span class="title1">isFile</span><span class="log">(</span><span class="log">)</span>;<span class="green">//返回true是文件</span></code><code data-key='xmp'> </code><code data-key='xmp'><span class="green">//复制文件</span></code><code data-key='xmp'><span class="green">//同步</span></code><code data-key='xmp'>fs<span class="log">.</span><span class="title1">copyFileSync</span><span class="log">(</span><span class="let">from</span>,to,mode<span class="log">)</span>;</code><code data-key='xmp'><span class="green">//异步</span></code><code data-key='xmp'>fs<span class="log">.</span><span class="title1">copyFileSync</span><span class="log">(</span><span class="let">from </span>,to ,err<span class="log"> => </span><span class="log">{</span></code><code data-key='xmp'>  <span class="title"><span class="let">if</span><span class="log">(</span></span>err<span class="log">)</span>console<span class="log">.</span><span class="title1">log</span><span class="log">(</span>err<span class="log">)</span>;</code><code data-key='xmp'><span class="log">}</span><span class="log">)</span></code><code data-key='xmp'> </code><code data-key='xmp'><span class="green">//删除文件和文件夹</span></code><code data-key='xmp'><span class="green">//删除文件</span></code><code data-key='xmp'>fs<span class="log">.</span><span class="title1">unlinkSync</span><span class="log">(</span><span class="string">"文件绝对路径"</span><span class="log">)</span>;</code><code data-key='xmp'>fs<span class="log">.</span><span class="title1">unlink</span><span class="log">(</span><span class="string">"文件绝对路径"</span>,callback<span class="log">)</span>;</code><code data-key='xmp'><span class="green">//删除文件</span></code><code data-key='xmp'>fs<span class="log">.</span><span class="title1">rmdirSync</span><span class="log">(</span><span class="string">"文件绝对路径"</span><span class="log">)</span>;</code><code data-key='xmp'>fs<span class="log">.</span><span class="title1">rmdir</span><span class="log">(</span><span class="string">"文件绝对路径"</span>,callback<span class="log">)</span>;</code></div></pre><img class="uploadImg" data-key="img" src="./imgs/upload_ef1ba3050cfafba8a75e4eba83b3469d.png"/><h4 id='1.2.2 读取文件' class='bE051540'>1.2.2 读取文件</h4><p class="remind">流</p><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div class='indexPre'><div class='index'>1.</div><div class='index'>2.</div><div class='index'>3.</div><div class='index'>4.</div><div class='index'>5.</div><div class='index'>6.</div><div class='index'>7.</div><div class='index'>8.</div><div class='index'>9.</div><div class='index'>10.</div><div class='index'>11.</div><div class='index'>12.</div><div class='index'>13.</div><div class='index'>14.</div><div class='index'>15.</div><div class='index'>16.</div><div class='index'>17.</div></div><div class="codePre"><code data-key='xmp'><span class="let">const </span>fs <span class="let">=</span> <span class="title">require<span class="log">(</span></span><span class="string">"fs"</span><span class="log">)</span>;</code><code data-key='xmp'><span class="let">let </span>stream <span class="let">=</span> fs<span class="log">.</span><span class="title1">createReadStream</span><span class="log">(</span>文件地址,<span class="log">{</span></code><code data-key='xmp'> <span class="green">//配置</span></code><code data-key='xmp'>  flag: <span class="string">"r"</span>,</code><code data-key='xmp'>  encoding: <span class="string">"utf8"</span></code><code data-key='xmp'><span class="log">}</span><span class="log">)</span>;</code><code data-key='xmp'><span class="let">let </span>res <span class="let">=</span> "";<span class="green">//如果是二进制文件就使用数组,一个一个push进去</span></code><code data-key='xmp'>stream<span class="log">.</span><span class="title1">on</span><span class="log">(</span><span class="string">"data"</span>,chunck<span class="log"> => </span><span class="log">{</span></code><code data-key='xmp'>  str <span class="let">+</span><span class="let">=</span> chunck;</code><code data-key='xmp'><span class="log">}</span><span class="log">)</span>;</code><code data-key='xmp'>stream<span class="log">.</span><span class="title1">on</span><span class="log">(</span><span class="string">"end"</span>,<span class="log">(</span><span class="log">)</span><span class="log"> => </span><span class="log">{</span></code><code data-key='xmp'>  console<span class="log">.</span><span class="title1">log</span><span class="log">(</span>str<span class="log">)</span>;</code><code data-key='xmp'>  stream<span class="log">.</span><span class="title1">close</span><span class="log">(</span><span class="log">)</span>;</code><code data-key='xmp'><span class="log">}</span><span class="log">)</span>;</code><code data-key='xmp'>stream<span class="log">.</span><span class="title1">on</span><span class="log">(</span><span class="string">"close"</span>,<span class="log">(</span><span class="log">)</span><span class="log"> => </span><span class="log">{</span></code><code data-key='xmp'>  console<span class="log">.</span><span class="title1">log</span><span class="log">(</span><span class="string">"close"</span><span class="log">)</span>;</code><code data-key='xmp'><span class="log">}</span><span class="log">)</span>;</code></div></pre><p class="remind">readFile</p><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div class='indexPre'><div class='index'>1.</div><div class='index'>2.</div><div class='index'>3.</div><div class='index'>4.</div><div class='index'>5.</div><div class='index'>6.</div><div class='index'>7.</div><div class='index'>8.</div><div class='index'>9.</div><div class='index'>10.</div><div class='index'>11.</div><div class='index'>12.</div></div><div class="codePre"><code data-key='xmp'><span class="let">const </span>fs <span class="let">=</span> <span class="title">require<span class="log">(</span></span><span class="string">"fs"</span><span class="log">)</span>;</code><code data-key='xmp'>fs<span class="log">.</span><span class="title1">readFile</span><span class="log">(</span><span class="string">"文件地址"</span>,<span class="log">{</span></code><code data-key='xmp'> <span class="green">//options</span></code><code data-key='xmp'>  flag: <span class="string">"r"</span>,</code><code data-key='xmp'>  encoding: <span class="string">"utf8"</span></code><code data-key='xmp'><span class="log">}</span>,<span class="log">(</span>err,data<span class="log">)</span><span class="log"> => </span><span class="log">{</span></code><code data-key='xmp'>  <span class="title"><span class="let">if</span><span class="log">(</span></span>err<span class="log">)</span><span class="log">{</span></code><code data-key='xmp'>    console<span class="log">.</span><span class="title1">log</span><span class="log">(</span>err<span class="log">)</span>;</code><code data-key='xmp'>  <span class="log">}</span></code><code data-key='xmp'>  console<span class="log">.</span><span class="title1">log</span><span class="log">(</span>data<span class="log">)</span>;</code><code data-key='xmp'><span class="log">}</span><span class="log">)</span>;</code><code data-key='xmp'><span class="let">const </span>data <span class="let">=</span> fs<span class="log">.</span><span class="title1">readFileSync</span><span class="log">(</span><span class="string">"文件地址"</span>,<span class="string">"options"</span><span class="log">)</span>;</code></div></pre><h4 id='1.2.3 写入文件' class='Ah989977'>1.2.3 写入文件</h4><p class="remind">流</p><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div class='indexPre'><div class='index'>1.</div><div class='index'>2.</div><div class='index'>3.</div><div class='index'>4.</div><div class='index'>5.</div><div class='index'>6.</div><div class='index'>7.</div><div class='index'>8.</div><div class='index'>9.</div><div class='index'>10.</div><div class='index'>11.</div><div class='index'>12.</div><div class='index'>13.</div><div class='index'>14.</div><div class='index'>15.</div><div class='index'>16.</div><div class='index'>17.</div></div><div class="codePre"><code data-key='xmp'><span class="let">const </span>fs <span class="let">=</span> <span class="title">require<span class="log">(</span></span><span class="string">"fs"</span><span class="log">)</span>;</code><code data-key='xmp'><span class="let">let </span>stream <span class="let">=</span> fs<span class="log">.</span><span class="title1">createWriteStream</span><span class="log">(</span><span class="string">"文件地址"</span>,<span class="log">{</span></code><code data-key='xmp'> <span class="green">//配置</span></code><code data-key='xmp'>  flag: <span class="string">"w"</span>,</code><code data-key='xmp'>  encoding: <span class="string">"utf8"</span></code><code data-key='xmp'><span class="log">}</span><span class="log">)</span>;</code><code data-key='xmp'>stream<span class="log">.</span><span class="title1">on</span><span class="log">(</span><span class="string">"end"</span>,<span class="log">(</span><span class="log">)</span><span class="log"> => </span><span class="log">{</span></code><code data-key='xmp'> <span class="green">//写入完成</span></code><code data-key='xmp'>  stream<span class="log">.</span><span class="title1">close</span><span class="log">(</span><span class="log">)</span>;</code><code data-key='xmp'><span class="log">}</span><span class="log">)</span>;</code><code data-key='xmp'>stream<span class="log">.</span><span class="title1">on</span><span class="log">(</span><span class="string">"close"</span>,<span class="log">(</span><span class="log">)</span><span class="log"> => </span><span class="log">{</span></code><code data-key='xmp'> <span class="green">//关闭</span></code><code data-key='xmp'><span class="log">}</span><span class="log">)</span>;</code><code data-key='xmp'>stream<span class="log">.</span><span class="title1">on</span><span class="log">(</span><span class="string">"error"</span>,err<span class="log"> => </span><span class="log">{</span></code><code data-key='xmp'> <span class="green">//写入报错</span></code><code data-key='xmp'><span class="log">}</span><span class="log">)</span>;</code><code data-key='xmp'>stream<span class="log">.</span><span class="title1">write</span><span class="log">(</span>data<span class="log">)</span>;</code></div></pre><p class="remind">writeFile</p><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div class='indexPre'><div class='index'>1.</div><div class='index'>2.</div><div class='index'>3.</div><div class='index'>4.</div><div class='index'>5.</div><div class='index'>6.</div><div class='index'>7.</div><div class='index'>8.</div></div><div class="codePre"><code data-key='xmp'><span class="let">const </span>fs <span class="let">=</span> <span class="title">require<span class="log">(</span></span><span class="string">"fs"</span><span class="log">)</span>;</code><code data-key='xmp'>fs<span class="log">.</span><span class="title1">writeFile</span><span class="log">(</span><span class="string">"写入地址"</span>,<span class="string">"写入内容"</span>,<span class="string">"配置"</span>,err<span class="log"> => </span><span class="log">{</span></code><code data-key='xmp'>  <span class="title"><span class="let">if</span><span class="log">(</span></span>err<span class="log">)</span><span class="log">{</span></code><code data-key='xmp'>   <span class="green">//写入失败</span></code><code data-key='xmp'>  <span class="log">}</span></code><code data-key='xmp'> <span class="green">//写入成功</span></code><code data-key='xmp'><span class="log">}</span><span class="log">)</span>;</code><code data-key='xmp'>fs<span class="log">.</span><span class="title1">writeFIleSync</span><span class="log">(</span><span class="string">"写入地址"</span>,<span class="string">"写入内容"</span>,<span class="string">"配置"</span><span class="log">)</span>;</code></div></pre><p class="remind">flag值</p><div style='width: 100%;position: relative;display: inline-block;'><table data-key='table'><tr><td>"w"</td><td>写入内容</td></tr><tr><td>"r"</td><td>读取内容</td></tr><tr><td>"a"</td><td>追加内容(没有文件会创建)</td></tr></table></div><h3 id='1.3 使用MongoDB' class='GZ983473'>1.3 使用MongoDB</h3><h4 id='1.3.1 连接' class='NL726460'>1.3.1 连接</h4><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div class='indexPre'><div class='index'>1.</div><div class='index'>2.</div><div class='index'>3.</div><div class='index'>4.</div><div class='index'>5.</div><div class='index'>6.</div><div class='index'>7.</div><div class='index'>8.</div><div class='index'>9.</div><div class='index'>10.</div><div class='index'>11.</div><div class='index'>12.</div><div class='index'>13.</div><div class='index'>14.</div><div class='index'>15.</div><div class='index'>16.</div><div class='index'>17.</div></div><div class="codePre"><code data-key='xmp'><span class="let">const </span><span class="log">{</span> MongoClient <span class="log">}</span> <span class="let">=</span> <span class="title">require<span class="log">(</span></span><span class="string">"mongodb"</span><span class="log">)</span>;</code><code data-key='xmp'><span class="let">let </span>url <span class="let">=</span> <span class="string">"mongodb://localhost:端口"</span>;<span class="green">//mongodb连接地址</span></code><code data-key='xmp'><span class="let">let </span>dbName <span class="let">=</span> <span class="string">"需要连接的数据库名称"</span>;</code><code data-key='xmp'><span class="let">let </span>collection <span class="let">=</span> <span class="string">"表名"</span>;</code><code data-key='xmp'><span class="let">let </span>client <span class="let">=</span><span class="let"> new </span><span class="title">MongoClient<span class="log">(</span></span>url<span class="log">)</span>;</code><code data-key='xmp'><span class="let">let </span>con <span class="let">=</span> <span class='keyword'>null</span>;</code><code data-key='xmp'> </code><code data-key='xmp'><span class="let">async </span><span class='let'>function</span> <span class="title">connect<span class="log">(</span></span><span class="log">)</span><span class="log">{</span></code><code data-key='xmp'>  try<span class="log">{</span></code><code data-key='xmp'>    <span class="let">await </span>client<span class="log">.</span><span class="title1">connect</span><span class="log">(</span><span class="log">)</span>; </code><code data-key='xmp'><span class="let">    let </span>db <span class="let">=</span> client<span class="log">.</span><span class="title1">db</span><span class="log">(</span>dbName<span class="log">)</span>;</code><code data-key='xmp'>    con <span class="let">=</span> db<span class="log">.</span><span class="title1">collection</span><span class="log">(</span>collection<span class="log">)</span>;</code><code data-key='xmp'>  <span class="log">}</span>catch<span class="log">(</span>err<span class="log">)</span><span class="log">{</span></code><code data-key='xmp'>   <span class="green">//连接出现问题</span></code><code data-key='xmp'>  <span class="log">}</span></code><code data-key='xmp'><span class="log">}</span></code><code data-key='xmp'>connect<span class="log">(</span><span class="log">)</span>;</code></div></pre><h4 id='1.3.2 查找' class='Gi581800'>1.3.2 查找</h4><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div class='indexPre'><div class='index'>1.</div><div class='index'>2.</div><div class='index'>3.</div><div class='index'>4.</div><div class='index'>5.</div><div class='index'>6.</div><div class='index'>7.</div><div class='index'>8.</div><div class='index'>9.</div><div class='index'>10.</div><div class='index'>11.</div><div class='index'>12.</div><div class='index'>13.</div><div class='index'>14.</div><div class='index'>15.</div><div class='index'>16.</div><div class='index'>17.</div><div class='index'>18.</div><div class='index'>19.</div></div><div class="codePre"><code data-key='xmp'><span class="let">const </span>data <span class="let">=</span> <span class="let">await </span>con<span class="log">.</span><span class="title1">find</span><span class="log">(</span><span class="log">{</span></code><code data-key='xmp'> <span class="green">//条件</span></code><code data-key='xmp'>  name: <span class="string">"小李"</span><span class="green">//查询name字段等于小李的数据</span></code><code data-key='xmp'><span class="log">}</span><span class="log">)</span><span class="log">.</span><span class="title1">toArray</span><span class="log">(</span><span class="log">)</span>;</code><code data-key='xmp'> </code><code data-key='xmp'><span class="green">//还可以</span></code><code data-key='xmp'><span class="let">const </span>data <span class="let">=</span> <span class="let">await </span>con<span class="log">.</span><span class="title1">find</span><span class="log">(</span><span class="log">{</span></code><code data-key='xmp'>  name: <span class="log">{</span><span class="string">"$eq"</span>: <span class="string">"小李"</span><span class="log">}</span></code><code data-key='xmp'><span class="log">}</span><span class="log">)</span><span class="log">.</span><span class="title1">toArray</span><span class="log">(</span><span class="log">)</span>;</code><code data-key='xmp'> </code><code data-key='xmp'><span class="green">//查找多少条</span></code><code data-key='xmp'><span class="let">const </span>data <span class="let">=</span> <span class="let">await </span>con<span class="log">.</span><span class="title1">find</span><span class="log">(</span><span class="log">{</span></code><code data-key='xmp'>  name: <span class="string">"小李"</span></code><code data-key='xmp'><span class="log">}</span><span class="log">)</span><span class="log">.</span><span class="title1">limit</span><span class="log">(</span>10<span class="log">)</span><span class="log">.</span><span class="title1">toArray</span><span class="log">(</span><span class="log">)</span>;<span class="green">//查找前10条数据</span></code><code data-key='xmp'> </code><code data-key='xmp'><span class="green">//从多少条数据开始获取</span></code><code data-key='xmp'><span class="let">const </span>data <span class="let">await </span>con<span class="log">.</span><span class="title1">find</span><span class="log">(</span><span class="log">{</span></code><code data-key='xmp'>  name: <span class="string">"小李"</span></code><code data-key='xmp'><span class="log">}</span><span class="log">)</span><span class="log">.</span><span class="title1">skip</span><span class="log">(</span>10<span class="log">)</span><span class="log">.</span><span class="title1">limit</span><span class="log">(</span>10<span class="log">)</span><span class="log">.</span><span class="title1">toArray</span><span class="log">(</span><span class="log">)</span>;<span class="green">//从第10条数据开始拿10条数据</span></code></div></pre><h3 id='ejs' class='Gi826417'>ejs</h3><p class="detail">js的模板引擎,主要就是根据不同数据显示不同，但是样式和布局都是一样的</p><h4 id='使用' class='AH310340'>使用</h4><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div class='indexPre'><div class='index'>1.</div><div class='index'>2.</div><div class='index'>3.</div><div class='index'>4.</div><div class='index'>5.</div><div class='index'>6.</div><div class='index'>7.</div><div class='index'>8.</div><div class='index'>9.</div><div class='index'>10.</div><div class='index'>11.</div><div class='index'>12.</div><div class='index'>13.</div><div class='index'>14.</div><div class='index'>15.</div><div class='index'>16.</div><div class='index'>17.</div><div class='index'>18.</div><div class='index'>19.</div><div class='index'>20.</div><div class='index'>21.</div><div class='index'>22.</div><div class='index'>23.</div><div class='index'>24.</div><div class='index'>25.</div></div><div class="codePre"><code data-key='xmp'><span class="green">//下载</span></code><code data-key='xmp'>npm i ejs <span class="let">-</span>D</code><code data-key='xmp'> </code><code data-key='xmp'><span class="green">//使用</span></code><code data-key='xmp'><span class="let">const </span>ejs <span class="let">=</span> <span class="title">require<span class="log">(</span></span><span class="string">"ejs"</span><span class="log">)</span>;</code><code data-key='xmp'> </code><code data-key='xmp'><span class="green">//方法一</span></code><code data-key='xmp'><span class="let">const </span>template <span class="let">=</span> ejs<span class="log">.</span><span class="title1">compile</span><span class="log">(</span><span class="string">"要转换的内容"</span>,配置参数<span class="log">)</span>;</code><code data-key='xmp'>template<span class="log">(</span>传递的参数<span class="log">)</span>;</code><code data-key='xmp'> </code><code data-key='xmp'><span class="green">//方法二</span></code><code data-key='xmp'>ejs<span class="log">.</span><span class="title1">render</span><span class="log">(</span><span class="string">"要转换的内容"</span>,传递的参数,配置参数<span class="log">)</span>;</code><code data-key='xmp'> </code><code data-key='xmp'><span class="green">//方法三</span></code><code data-key='xmp'>ejs<span class="log">.</span><span class="title1">renderFile</span><span class="log">(</span><span class="string">"文件名"</span>,传递参数,配置参数,<span class='let'>function</span><span class="log">(</span>err,str<span class="log">)</span><span class="log">{</span></code><code data-key='xmp'>  console<span class="log">.</span><span class="title1">log</span><span class="log">(</span>err<span class="log">)</span>;<span class="green">//错误信息</span></code><code data-key='xmp'>  console<span class="log">.</span><span class="title1">log</span><span class="log">(</span>str<span class="log">)</span>;<span class="green">//处理完后的模板</span></code><code data-key='xmp'><span class="log">}</span><span class="log">)</span>;</code><code data-key='xmp'> </code><code data-key='xmp'><span class="green">//文件中使用</span></code><code data-key='xmp'><span class='angleBracket'>&lt;</span><span class='elName'>div</span><span class='angleBracket'>&gt;</span></code><code data-key='xmp'>  <span class='angleBracket'>&lt;</span><span class='elName'>%=</span> 动态的数据 %<span class='angleBracket'>&gt;</span></code><code data-key='xmp'>  <span class='angleBracket'>&lt;</span><span class='elName'>%</span> 脚本流程 %<span class='angleBracket'>&gt;</span><span class="green">//比如说通过if控制或者forEach循环处理</span></code><code data-key='xmp'>  <span class='angleBracket'>&lt;</span><span class='elName'>%-</span> include("文件地址","传递数据","配置参数"); %<span class='angleBracket'>&gt;</span> <span class="green">//用于嵌套ejs模板</span></code><code data-key='xmp'><span class='angleBracket'>&lt;/</span><span class='elName'>div</span><span class='angleBracket'>&gt;</span></code></div></pre><h4 id='例子' class='dB663099'>例子</h4><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div class='indexPre'><div class='index'>1.</div><div class='index'>2.</div><div class='index'>3.</div><div class='index'>4.</div><div class='index'>5.</div><div class='index'>6.</div><div class='index'>7.</div><div class='index'>8.</div><div class='index'>9.</div><div class='index'>10.</div><div class='index'>11.</div><div class='index'>12.</div><div class='index'>13.</div><div class='index'>14.</div><div class='index'>15.</div><div class='index'>16.</div><div class='index'>17.</div><div class='index'>18.</div><div class='index'>19.</div><div class='index'>20.</div><div class='index'>21.</div><div class='index'>22.</div><div class='index'>23.</div><div class='index'>24.</div></div><div class="codePre"><code data-key='xmp'><span class="let">const </span>ejs <span class="let">=</span> <span class="title">require<span class="log">(</span></span><span class="string">"ejs"</span><span class="log">)</span>;</code><code data-key='xmp'><span class="let">const </span><span class="log">{</span> resolve <span class="log">}</span> <span class="let">=</span> <span class="title">require<span class="log">(</span></span><span class="string">"path"</span><span class="log">)</span>;</code><code data-key='xmp'><span class="let">const </span>data <span class="let">=</span> [</code><code data-key='xmp'>  <span class="log">{</span>name: <span class="string">"巴拉巴拉"</span>,age: 18,hobby: <span class="string">"电影"</span>,photo: <span class="string">"http://balabala/photo.png"</span><span class="log">}</span></code><code data-key='xmp'>];</code><code data-key='xmp'>ejs<span class="log">.</span><span class="title1">renderFile</span><span class="log">(</span>resolve<span class="log">(</span>__dirname,<span class="string">"./template/code.html"</span><span class="log">)</span>,<span class="log">{</span>data,fileDir: <span class="title">resolve<span class="log">(</span></span>__dirname,<span class="string">"./template/card.html"</span><span class="log">)</span><span class="log">}</span>,<span class='let'>function</span><span class="log">(</span>err,str<span class="log">)</span><span class="log">{</span></code><code data-key='xmp'>  console<span class="log">.</span><span class="title1">log</span><span class="log">(</span>str<span class="log">)</span>;</code><code data-key='xmp'><span class="log">}</span><span class="log">)</span>;</code><code data-key='xmp'> </code><code data-key='xmp'><span class="green">//template/code<span class="log">.</span><span class="title1">html</span></span></code><code data-key='xmp'><span class='angleBracket'>&lt;</span><span class='elName'>%</span> if(data){ %<span class='angleBracket'>&gt;</span><span class="green">//js的if一样的,forEach也是</span></code><code data-key='xmp'><span class='angleBracket'>&lt;</span><span class='elName'>%</span> data.forEach(function(item){ %<span class='angleBracket'>&gt;</span></code><code data-key='xmp'>  <span class='angleBracket'>&lt;</span><span class='elName'>%-</span> include(fileDir,{item}) %<span class='angleBracket'>&gt;</span></code><code data-key='xmp'><span class='angleBracket'>&lt;</span><span class='elName'>%</span> }) %<span class='angleBracket'>&gt;</span></code><code data-key='xmp'><span class='angleBracket'>&lt;</span><span class='elName'>%</span> } %<span class='angleBracket'>&gt;</span></code><code data-key='xmp'> </code><code data-key='xmp'><span class="green">//template/card<span class="log">.</span><span class="title1">html</span></span></code><code data-key='xmp'><span class='angleBracket'>&lt;</span><span class='elName'>%</span> if(item){ %<span class='angleBracket'>&gt;</span></code><code data-key='xmp'><span class='angleBracket'>&lt;</span><span class='elName'>div</span><span class='angleBracket'>&gt;</span>姓名:<span class='angleBracket'>&lt;</span><span class='elName'>%=</span> item.name %<span class='angleBracket'>&gt;</span><span class='angleBracket'>&lt;/</span><span class='elName'>div</span><span class='angleBracket'>&gt;</span></code><code data-key='xmp'><span class='angleBracket'>&lt;</span><span class='elName'>div</span><span class='angleBracket'>&gt;</span></code><code data-key='xmp'>  头像: </code><code data-key='xmp'>  <span class='angleBracket'>&lt;</span><span class='elName'>div</span> style="background: url(<%= item.photo %<span class='angleBracket'>&gt;</span><span class="log">)</span>;"><span class='angleBracket'>&lt;/</span><span class='elName'>div</span><span class='angleBracket'>&gt;</span></code><code data-key='xmp'><span class='angleBracket'>&lt;/</span><span class='elName'>div</span><span class='angleBracket'>&gt;</span></code><code data-key='xmp'><span class="log">.</span><span class="log">.</span><span class="log">.</span></code></div></pre>
                </div>
                <div class="rightDraw">
                <div class="menu"><div class="directory">目录</div><ul class="menuCon"><li class="menu_li"><a href="#一、nodejs笔记" id="Kf510464" class="">一、nodejs笔记</a><ul class="menuCon_1"><li class="menu_li0"><a href="#1.1 请求服务器" id="DH077096">1.1 请求服务器</a><ul class="menuCon_2"><li class="menu_li0"><a href="#1.1.1 get请求" id="Kf731827">1.1.1 get请求</a></li><li class="menu_li1"><a href="#1.1.2 post请求" id="Gh546306">1.1.2 post请求</a></li></ul></li><li class="menu_li1"><a href="#1.2 fs模块操作" id="gh535542">1.2 fs模块操作</a><ul class="menuCon_3"><li class="menu_li0"><a href="#1.2.1 常用api" id="ah943564">1.2.1 常用api</a></li><li class="menu_li1"><a href="#1.2.2 读取文件" id="bE051540">1.2.2 读取文件</a></li><li class="menu_li2"><a href="#1.2.3 写入文件" id="Ah989977">1.2.3 写入文件</a></li></ul></li><li class="menu_li2"><a href="#1.3 使用MongoDB" id="GZ983473">1.3 使用MongoDB</a><ul class="menuCon_4"><li class="menu_li0"><a href="#1.3.1 连接" id="NL726460">1.3.1 连接</a></li><li class="menu_li1"><a href="#1.3.2 查找" id="Gi581800">1.3.2 查找</a></li></ul></li><li class="menu_li3"><a href="#ejs" id="Gi826417">ejs</a><ul class="menuCon_5"><li class="menu_li0"><a href="#使用" id="AH310340">使用</a></li><li class="menu_li1"><a href="#例子" id="dB663099">例子</a></li></ul></li></ul></li></ul></div>
                </div>
              </div>
           </div>
           <svg t="1648304059372" class="icon up" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3132" width="200" height="200"><path d="M832 64 192 64C121.6 64 64 121.6 64 192l0 640c0 70.4 57.6 128 128 128l640 0c70.4 0 128-57.6 128-128L960 192C960 121.6 902.4 64 832 64zM762.24 759.04c-12.8 12.8-33.28 12.8-45.44 0L513.92 560l-202.24 199.04c-12.8 12.8-33.28 12.8-45.44 0-12.8-12.8-12.8-32.64 0-45.44l224-220.16c6.4-6.4 15.36-9.6 24.32-8.96C522.88 483.84 531.2 487.04 538.24 493.44l224 220.16C775.04 726.4 775.04 746.24 762.24 759.04zM762.24 503.04c-12.8 12.8-33.28 12.8-45.44 0L513.92 304 311.68 503.04c-12.8 12.8-33.28 12.8-45.44 0-12.8-12.8-12.8-32.64 0-45.44l224-220.16c6.4-6.4 15.36-9.6 24.32-8.96C522.88 227.84 531.2 231.04 538.24 237.44l224 220.16C775.04 470.4 775.04 490.24 762.24 503.04z" p-id="3133" fill="#ffffff"></path></svg>
        </div>
        </body>
           <script>let titles = [{"title":"一、nodejs笔记","id":"一、nodejs笔记","index":2,"class":"Kf510464","children":[{"title":"1.1 请求服务器","id":"1.1 请求服务器","index":3,"class":"DH077096","children":[{"title":"1.1.1 get请求","id":"1.1.1 get请求","index":4,"class":"Kf731827"},{"title":"1.1.2 post请求","id":"1.1.2 post请求","index":4,"class":"Gh546306"}]},{"title":"1.2 fs模块操作","id":"1.2 fs模块操作","index":3,"class":"gh535542","children":[{"title":"1.2.1 常用api","id":"1.2.1 常用api","index":4,"class":"ah943564"},{"title":"1.2.2 读取文件","id":"1.2.2 读取文件","index":4,"class":"bE051540"},{"title":"1.2.3 写入文件","id":"1.2.3 写入文件","index":4,"class":"Ah989977"}]},{"title":"1.3 使用MongoDB","id":"1.3 使用MongoDB","index":3,"class":"GZ983473","children":[{"title":"1.3.1 连接","id":"1.3.1 连接","index":4,"class":"NL726460"},{"title":"1.3.2 查找","id":"1.3.2 查找","index":4,"class":"Gi581800"}]},{"title":"ejs","id":"ejs","index":3,"class":"Gi826417","children":[{"title":"使用","id":"使用","index":4,"class":"AH310340"},{"title":"例子","id":"例子","index":4,"class":"dB663099"}]}]}];</script>
           <script src="../index.js" type="text/javascript"></script>
           </html>
            