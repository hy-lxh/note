
        <!DOCTYPE html>
         <html lang="en">
         <head>
	     <meta charset="UTF-8">
         <meta name="keywords" content="pinia,博客,前端"/>
         <meta name="description" content="pinia状态管理"/>
         <!--<meta http-equiv="content-security-policy" content="default-src self"/>-->
	     <title>pinia</title>
        </head>
        <link rel="stylesheet" href="../main.css">
        <body>
        <div class="message_box"></div>
        <div class="content">
           <div id="view">
              <div>
                <div class="bs_content">
                   <h2 id='pinia' class='AE927315'>pinia</h2><p class="indent">vuex之外的又一全局状态管理,在vue3中使用十分方便和简洁,它没有了mutations和modules属性</p><h3 id='如何初始化store' class='AH709353'>如何初始化store</h3><h4 id='第一步' class='DK589552'>第一步</h4><p class="indent">创建一个pinia再通过use注册</p><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div class='indexPre'><div class='index'>1.</div><div class='index'>2.</div><div class='index'>3.</div><div class='index'>4.</div><div class='index'>5.</div><div class='index'>6.</div><div class='index'>7.</div><div class='index'>8.</div><div class='index'>9.</div><div class='index'>10.</div><div class='index'>11.</div><div class='index'>12.</div></div><div class="codePre"><code data-key='xmp'><span class="green">store/index<span class="log">.</span><span class="title1">ts</span></span></code><code data-key='xmp'><span class="let">import </span><span class="log">{</span> createPinia <span class="log">}</span><span class="let"> from </span><span class="string">"pinia"</span>;</code><code data-key='xmp'><span class="let">const </span>pinia <span class="let">=</span> <span class="title">createPinia<span class="log">(</span></span><span class="log">)</span>;</code><code data-key='xmp'><span class="let">export default</span> pinia;</code><code data-key='xmp'> </code><code data-key='xmp'><span class="green">main<span class="log">.</span><span class="title1">ts</span></span></code><code data-key='xmp'><span class="let">import </span><span class="log">{</span> createApp <span class="log">}</span><span class="let"> from </span><span class="string">"vue"</span>;</code><code data-key='xmp'><span class="let">import </span>pinia<span class="let"> from </span><span class="string">"@/store/index"</span>;</code><code data-key='xmp'><span class="let">const </span>app <span class="let">=</span> <span class="title">createApp<span class="log">(</span></span>component,<span class="log">{</span></code><code data-key='xmp'>  <span class="log">.</span><span class="log">.</span><span class="log">.</span> <span class="green">options</span></code><code data-key='xmp'><span class="log">}</span><span class="log">)</span>;</code><code data-key='xmp'>app<span class="log">.</span><span class="title1">use</span><span class="log">(</span>pinia<span class="log">)</span>;</code></div></pre><h4 id='第二步' class='gD219593'>第二步</h4><p class="indent">创建一个独立的store模块</p><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div class='indexPre'><div class='index'>1.</div><div class='index'>2.</div><div class='index'>3.</div><div class='index'>4.</div><div class='index'>5.</div><div class='index'>6.</div><div class='index'>7.</div><div class='index'>8.</div><div class='index'>9.</div><div class='index'>10.</div><div class='index'>11.</div><div class='index'>12.</div><div class='index'>13.</div><div class='index'>14.</div><div class='index'>15.</div><div class='index'>16.</div><div class='index'>17.</div><div class='index'>18.</div><div class='index'>19.</div><div class='index'>20.</div></div><div class="codePre"><code data-key='xmp'><span class="green">通过pinia提供的defineStore方法,接收两个参数,第一个就是当前store的唯一id</span></code><code data-key='xmp'><span class="green">第二个是一个对象,存放着state、getters、actions三个属性</span></code><code data-key='xmp'><span class="green">state和vuex中有些许差别,倒和vue 里面的data返回数据一样,通过函数导出,这样还原的时候直接再执行一遍覆盖掉就好了</span></code><code data-key='xmp'><span class="let">import </span><span class="log">{</span> defineStore <span class="log">}</span><span class="let"> from </span><span class="string">"pinia"</span>;</code><code data-key='xmp'><span class="let">export </span><span class="let">const </span>useModuleStore <span class="let">=</span> <span class="title">defineStore<span class="log">(</span></span><span class="string">"moduleStore"</span>,<span class="log">{</span></code><code data-key='xmp'>  state<span class="colonColor">: </span><span class="typeColor"><span class="log">(</span><span class="log">)</span></span><span class="log"> => </span><span class="log">(</span><span class="log">{</span></code><code data-key='xmp'>    counter: 1</code><code data-key='xmp'>  <span class="log">}</span><span class="log">)</span>,</code><code data-key='xmp'>  getters: <span class="log">{</span></code><code data-key='xmp'>    doubleCounter:<span class="log">(</span>state<span class="log">)</span><span class="log"> => </span>state<span class="log">.</span><span class="title1">counter</span> <span class="let">+</span> 1;</code><code data-key='xmp'>  <span class="log">}</span>, <span class="green">getters和vuex中一致,传入state,最后再返回值</span></code><code data-key='xmp'>  actions: <span class="log">{</span></code><code data-key='xmp'>    <span class="title">setCounterSync<span class="log">(</span></span>newCounter<span class="log">)</span><span class="log">{</span></code><code data-key='xmp'>      <span class="let">this</span><span class="log">.</span><span class="title1">counter</span> <span class="let">=</span> newCounter;</code><code data-key='xmp'>    <span class="log">}</span>,</code><code data-key='xmp'>    <span class="title">setCounter<span class="log">(</span></span>newCounter<span class="log">)</span><span class="log">{</span></code><code data-key='xmp'>      <span class="let">return</span><span class="let"> new </span><span class="title">Promise<span class="log">(</span></span>resolve<span class="log"> => </span><span class="title">setTimeout<span class="log">(</span></span><span class="log">(</span><span class="log">)</span><span class="log"> => </span><span class="let">this</span><span class="log">.</span><span class="title1">counter</span> <span class="let">=</span> newCounter<span class="log">)</span><span class="log">)</span>;</code><code data-key='xmp'>    <span class="log">}</span></code><code data-key='xmp'>  <span class="log">}</span> <span class="green">相当于vuex中mutations和actions的结合,同步异步写在一起了 里面没有再传store,直接可通过this修改</span></code><code data-key='xmp'><span class="log">}</span><span class="log">)</span>;</code></div></pre><h3 id='如何使用' class='NL991506'>如何使用</h3><h4 id='vue3' class='eb876995'>vue3</h4><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div style='height: 14px;'></div><div class='indexPre'><div class='index'>1.</div><div class='index'>2.</div><div class='index'>3.</div><div class='index'>4.</div><div class='index'>5.</div><div class='index'>6.</div><div class='index'>7.</div><div class='index'>8.</div><div class='index'>9.</div><div class='index'>10.</div><div class='index'>11.</div><div class='index'>12.</div><div class='index'>13.</div><div class='index'>14.</div><div class='index'>15.</div><div class='index'>16.</div><div class='index'>17.</div><div class='index'>18.</div><div class='index'>19.</div><div class='index'>20.</div><div class='index'>21.</div><div class='index'>22.</div><div class='index'>23.</div><div class='index'>24.</div><div class='index'>25.</div><div class='index'>26.</div><div class='index'>27.</div><div class='index'>28.</div><div class='index'>29.</div><div class='index'>30.</div><div class='index'>31.</div><div class='index'>32.</div><div class='index'>33.</div><div class='index'>34.</div><div class='index'>35.</div><div class='index'>36.</div><div class='index'>37.</div><div class='index'>38.</div><div class='index'>39.</div><div class='index'>40.</div><div class='index'>41.</div><div class='index'>42.</div><div class='index'>43.</div><div class='index'>44.</div><div class='index'>45.</div><div class='index'>46.</div><div class='index'>47.</div><div class='index'>48.</div><div class='index'>49.</div><div class='index'>50.</div><div class='index'>51.</div><div class='index'>52.</div><div class='index'>53.</div><div class='index'>54.</div><div class='index'>55.</div></div><div class="codePre"><code data-key='xmp'><span class='angleBracket'>&lt;</span><span class='elName'>script</span> setup<span class='angleBracket'>&gt;</span></code><code data-key='xmp'>  <span class="green">首先将定义的store引入</span></code><code data-key='xmp'><span class="let">  import </span><span class="log">{</span> useModuleStore <span class="log">}</span><span class="let"> from </span><span class="string">"@/store/module"</span>;</code><code data-key='xmp'>  <span class="green">获取到状态管理对象</span></code><code data-key='xmp'>  <span class="let">const </span>moduleStore <span class="let">=</span> <span class="title">useModuleStore<span class="log">(</span></span><span class="log">)</span>;</code><code data-key='xmp'>  <span class="green">使用state和getters里面的变量</span></code><code data-key='xmp'>  console<span class="log">.</span><span class="title1">log</span><span class="log">(</span>moduleStore<span class="log">.</span><span class="title1">counter</span>,moduleStore<span class="log">.</span><span class="title1">doubleCounter</span><span class="log">)</span>; <span class="green">1 2</span></code><code data-key='xmp'>  <span class="green">使用actions修改counter</span></code><code data-key='xmp'>  <span class="green">同步</span></code><code data-key='xmp'>  moduleCounter<span class="log">.</span><span class="title1">setCounterSync</span><span class="log">(</span>2<span class="log">)</span>;</code><code data-key='xmp'>  console<span class="log">.</span><span class="title1">log</span><span class="log">(</span>moduleStore<span class="log">.</span><span class="title1">counter</span>,moduleStore<span class="log">.</span><span class="title1">doubleCounter</span><span class="log">)</span>; <span class="green">2 4</span></code><code data-key='xmp'>  <span class="green">异步</span></code><code data-key='xmp'>  <span class="let">await </span>moduleCounter<span class="log">.</span><span class="title1">setCounter</span><span class="log">(</span>3<span class="log">)</span>;</code><code data-key='xmp'>  <span class="green"><span class="log">.</span><span class="log">.</span><span class="log">.</span></span></code><code data-key='xmp'>  <span class="green"><span class="log">.</span><span class="log">.</span><span class="log">.</span></span></code><code data-key='xmp'>  </code><code data-key='xmp'>  <span class="green">解构 需要使用到pinia提供的storeToRefs</span></code><code data-key='xmp'>  <span class="let">const </span><span class="log">{</span> counter <span class="log">}</span> <span class="let">=</span> <span class="title">storeToRefs<span class="log">(</span></span>moduleStore<span class="log">.</span><span class="title1">counter</span><span class="log">)</span>;</code><code data-key='xmp'>  console<span class="log">.</span><span class="title1">log</span><span class="log">(</span>counter<span class="log">.</span><span class="title1">value</span><span class="log">)</span>; <span class="green">4</span></code><code data-key='xmp'> </code><code data-key='xmp'>  <span class="green">修改</span></code><code data-key='xmp'>  <span class="green">可直接赋值修改或者通过内置方法$patch修改,传一个对象或者函数,对象使用就和setState一致,传函数会把store传递过来,可直接手动修改</span></code><code data-key='xmp'>  <span class="green">通过$reset可重置原来的值,修改$state的值可覆盖state</span></code><code data-key='xmp'>  moduleStore<span class="log">.</span><span class="title1">counter</span> <span class="let">=</span> 2;</code><code data-key='xmp'>  moduleStore<span class="log">.</span>$patch<span class="log">(</span><span class="log">{</span> counter<span class="colonColor">: </span><span class="typeColor">3 <span class="log">}</span></span><span class="log">)</span>;</code><code data-key='xmp'>  moduleStore<span class="log">.</span>$patch<span class="log">(</span>store<span class="log"> => </span><span class="log">{</span></code><code data-key='xmp'>    store<span class="log">.</span><span class="title1">counter</span> <span class="let">=</span> 4;</code><code data-key='xmp'>  <span class="log">}</span><span class="log">)</span>;</code><code data-key='xmp'>  moduleStore<span class="log">.</span>$reset<span class="log">(</span><span class="log">)</span>;</code><code data-key='xmp'>  moduleStore<span class="log">.</span>$state <span class="let">=</span> <span class="log">{</span></code><code data-key='xmp'>    counter: 2</code><code data-key='xmp'>  <span class="log">}</span>;</code><code data-key='xmp'>  </code><code data-key='xmp'>  <span class="green">通过$subscribe可以监听某个state的变化</span></code><code data-key='xmp'>  moduleStore<span class="log">.</span>$subscribe<span class="log">(</span><span class="log">(</span>mutation,state<span class="log">)</span><span class="log"> => </span><span class="log">{</span></code><code data-key='xmp'>    <span class="green">mutation<span class="log">.</span><span class="title1">type</span> direct <span class="let">-</span>> 直接赋值修改 patch object 通过$patch传对象修改 patch <span class='let'>function</span> 传函数修改</span></code><code data-key='xmp'>    <span class="green">mutation<span class="log">.</span><span class="title1">storeId</span> <span class="let">-</span>> 当时配置的defineStore传的id</span></code><code data-key='xmp'>  <span class="log">}</span>,<span class="log">{</span>detached<span class="colonColor">: </span><span class="typeColor">true<span class="log">}</span><span class="log">)</span></span>; <span class="green">如果在组件中注册会在组件注销后就删掉了,如果想保留就在第二个参数传入 detached: <span class="let">true</span></span></code><code data-key='xmp'>  <span class="green">通过$onAction监听action中方法调用</span></code><code data-key='xmp'>  moduleStore<span class="log">.</span>$onAction<span class="log">(</span><span class="log">(</span><span class="log">{</span></code><code data-key='xmp'>    name, <span class="green">调用的action名字</span></code><code data-key='xmp'>    store, <span class="green">store实例</span></code><code data-key='xmp'>    payload, <span class="green">传递的参数</span></code><code data-key='xmp'>    after, <span class="green">action方法执行完成之后调用after里面传入的回调</span></code><code data-key='xmp'>    onError <span class="green">action方法执行报错的时候调用onError传入的回调</span></code><code data-key='xmp'>  <span class="log">}</span><span class="log">)</span><span class="log"> => </span><span class="log">{</span></code><code data-key='xmp'>     <span class="title">after<span class="log">(</span></span><span class="log">(</span>result<span class="log">)</span><span class="log"> => </span><span class="log">{</span></code><code data-key='xmp'>       console<span class="log">.</span><span class="title1">log</span><span class="log">(</span>result<span class="log">)</span>; <span class="green">执行完成的返回值</span></code><code data-key='xmp'>     <span class="log">}</span><span class="log">)</span>;</code><code data-key='xmp'>     <span class="title">onError<span class="log">(</span></span><span class="log">(</span>error<span class="log">)</span><span class="log"> => </span><span class="log">{</span></code><code data-key='xmp'>       console<span class="log">.</span><span class="title1">log</span><span class="log">(</span>error<span class="log">)</span>; <span class="green">抛出的错误</span></code><code data-key='xmp'>     <span class="log">}</span><span class="log">)</span>;</code><code data-key='xmp'>     <span class="green">组件注销后就会自动删除,如果想保留就在第二个参数传入true</span></code><code data-key='xmp'>  <span class="log">}</span><span class="log">)</span></code><code data-key='xmp'><span class='angleBracket'>&lt;/</span><span class='elName'>script</span><span class='angleBracket'>&gt;</span></code></div></pre><h4 id='vue2.0' class='hi563434'>vue2.0</h4><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div class='indexPre'><div class='index'>1.</div><div class='index'>2.</div><div class='index'>3.</div><div class='index'>4.</div><div class='index'>5.</div><div class='index'>6.</div><div class='index'>7.</div><div class='index'>8.</div><div class='index'>9.</div><div class='index'>10.</div><div class='index'>11.</div><div class='index'>12.</div><div class='index'>13.</div><div class='index'>14.</div><div class='index'>15.</div><div class='index'>16.</div><div class='index'>17.</div><div class='index'>18.</div><div class='index'>19.</div><div class='index'>20.</div><div class='index'>21.</div><div class='index'>22.</div><div class='index'>23.</div><div class='index'>24.</div><div class='index'>25.</div><div class='index'>26.</div><div class='index'>27.</div></div><div class="codePre"><code data-key='xmp'><span class="green">state或者getters可以通过mapState引入一个只读的state,或者通过mapWritableState引入一个可以写入的state</span></code><code data-key='xmp'><span class="green">这两个方法有两个参数,一个是所要引入的模块,另一个可以是一个数组或者对象,里面填写需要使用到的变量</span></code><code data-key='xmp'><span class="green">actions可以通过mapActions，使用方法和mapState差不多</span></code><code data-key='xmp'><span class='angleBracket'>&lt;</span><span class='elName'>script</span><span class='angleBracket'>&gt;</span></code><code data-key='xmp'><span class="let">  import </span><span class="log">{</span> mapState,mapWritableStore <span class="log">}</span><span class="let"> from </span><span class="string">"pinia"</span>;</code><code data-key='xmp'><span class="let">  import </span><span class="log">{</span> useModuleStore <span class="log">}</span><span class="let"> from </span><span class="string">"@/store/module"</span>;</code><code data-key='xmp'>  <span class="let">export default</span> <span class="log">{</span></code><code data-key='xmp'>    computed: <span class="log">{</span></code><code data-key='xmp'>      <span class="log">.</span><span class="log">.</span><span class="log">.</span>mapState<span class="log">(</span>useModuleStore,[<span class="string">"counter"</span>,<span class="string">"doubleCounter"</span>]<span class="log">)</span>,</code><code data-key='xmp'>      <span class="log">.</span><span class="log">.</span><span class="log">.</span>mapState<span class="log">(</span>useModuleStore,<span class="log">{</span></code><code data-key='xmp'>        aliasCounter: <span class="string">"counter"</span>, <span class="green">别名使用 使用时就是<span class="let">this</span><span class="log">.</span><span class="title1">aliasCounter</span></span></code><code data-key='xmp'>        doubleCounter:state<span class="log"> => </span>state<span class="log">.</span><span class="title1">counter</span> * 2,</code><code data-key='xmp'>        <span class="title">doubleCounter1<span class="log">(</span></span>store<span class="log">)</span><span class="log">{</span></code><code data-key='xmp'>          <span class="green">这里面可以通过this访问state里面的变量</span></code><code data-key='xmp'>          <span class="let">return</span> <span class="let">this</span><span class="log">.</span><span class="title1">counter</span> * 2;</code><code data-key='xmp'>        <span class="log">}</span></code><code data-key='xmp'>      <span class="log">}</span><span class="log">)</span>,</code><code data-key='xmp'>      <span class="green">mapWritableState和mapState使用方法是一致的,就是方法名不一样</span></code><code data-key='xmp'>    <span class="log">}</span>,</code><code data-key='xmp'>    method: <span class="log">{</span></code><code data-key='xmp'>      <span class="log">.</span><span class="log">.</span><span class="log">.</span>mapAction<span class="log">(</span>useModuleStore,[<span class="string">"setCounterSync"</span>]<span class="log">)</span>,</code><code data-key='xmp'>      <span class="log">.</span><span class="log">.</span><span class="log">.</span>mapAction<span class="log">(</span>useModuleStore,<span class="log">{</span></code><code data-key='xmp'>        <span class="string">"别名"</span>: <span class="string">"setCounter"</span></code><code data-key='xmp'>      <span class="log">}</span><span class="log">)</span></code><code data-key='xmp'>    <span class="log">}</span></code><code data-key='xmp'>  <span class="log">}</span></code><code data-key='xmp'><span class='angleBracket'>&lt;/</span><span class='elName'>script</span><span class='angleBracket'>&gt;</span></code></div></pre><h3 id='插件使用' class='He099761'>插件使用</h3><p class="indent">通过<span class="highlight">createPinia</span>创建的pinia中的use去注册插件,插件要是个函数,use会传入一个context,里面主要包含了pinia、app、store、options</p><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div class='indexPre'><div class='index'>1.</div><div class='index'>2.</div><div class='index'>3.</div><div class='index'>4.</div><div class='index'>5.</div><div class='index'>6.</div><div class='index'>7.</div><div class='index'>8.</div><div class='index'>9.</div><div class='index'>10.</div><div class='index'>11.</div><div class='index'>12.</div></div><div class="codePre"><code data-key='xmp'><span class="let">import </span><span class="log">{</span> createPinia <span class="log">}</span><span class="let"> from </span><span class="string">"pinia"</span>;</code><code data-key='xmp'><span class="let">let </span>pinia <span class="let">=</span> <span class="title">createPinia<span class="log">(</span></span><span class="log">)</span>;</code><code data-key='xmp'><span class='let'>function</span> <span class="title">myPlugin<span class="log">(</span></span>context<span class="log">)</span><span class="log">{</span></code><code data-key='xmp'>  <span class="green">context<span class="log">.</span><span class="title1">pinia</span> 就是createPinia创建出来的pinia</span></code><code data-key='xmp'>  <span class="green">context<span class="log">.</span><span class="title1">app</span> vue全局实例</span></code><code data-key='xmp'>  <span class="green">context<span class="log">.</span><span class="title1">store</span> 扩充的store</span></code><code data-key='xmp'>  <span class="green">context<span class="log">.</span><span class="title1">option</span> 某个defineStore传入的</span></code><code data-key='xmp'>  </code><code data-key='xmp'>  <span class="green">会把每个defineStore创建的store都传入进去,可以直接添加修改变量</span></code><code data-key='xmp'>  <span class="green">或者返回一个对象,将返回的数据和原来的合并起来</span></code><code data-key='xmp'><span class="log">}</span></code><code data-key='xmp'><span class="let">export default</span> pinia;</code></div></pre><h3 id='Nuxtjs中使用' class='aA619750'>Nuxtjs中使用</h3><h4 id='下载' class='NI140041'>下载</h4><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div class='indexPre'><div class='index'>1.</div></div><div class="codePre"><code data-key='xmp'>npm install pinia @pinia/nuxt @nuxtjs/composition<span class="let">-</span>api</code></div></pre><h4 id='配置' class='Fh796203'>配置</h4><p class="indent">nuxt.config.js配置</p><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div class='indexPre'><div class='index'>1.</div><div class='index'>2.</div><div class='index'>3.</div><div class='index'>4.</div><div class='index'>5.</div><div class='index'>6.</div></div><div class="codePre"><code data-key='xmp'><span class="let">export default</span> <span class="log">{</span></code><code data-key='xmp'>  buildModules: [</code><code data-key='xmp'>    '@nuxtjs/composition<span class="let">-</span>api/module',</code><code data-key='xmp'>    '@pinia/nuxt'</code><code data-key='xmp'>  ]</code><code data-key='xmp'><span class="log">}</span></code></div></pre><h4 id='使用' class='gg300677'>使用</h4><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div class='indexPre'><div class='index'>1.</div><div class='index'>2.</div><div class='index'>3.</div><div class='index'>4.</div><div class='index'>5.</div></div><div class="codePre"><code data-key='xmp'><span class="let">export default</span> <span class="log">{</span></code><code data-key='xmp'>  <span class="title">asyncData<span class="log">(</span></span><span class="log">{</span> $pinia <span class="log">}</span><span class="log">)</span><span class="log">{</span></code><code data-key='xmp'>    <span class="let">const </span>moduleStore <span class="let">=</span> <span class="title">useModuleStore<span class="log">(</span></span>$pinia<span class="log">)</span>; <span class="green">不一样的是需要把pinia传过去</span></code><code data-key='xmp'>  <span class="log">}</span></code><code data-key='xmp'><span class="log">}</span></code></div></pre><h4 id='TypeScript' class='ii333458'>TypeScript</h4><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div class='indexPre'><div class='index'>1.</div><div class='index'>2.</div><div class='index'>3.</div><div class='index'>4.</div><div class='index'>5.</div><div class='index'>6.</div></div><div class="codePre"><code data-key='xmp'><span class="green">tsconfig<span class="log">.</span><span class="title1">js</span></span></code><code data-key='xmp'><span class="log">{</span></code><code data-key='xmp'>  <span class="string">"types"</span>: [</code><code data-key='xmp'>    <span class="string">"@pinia/nuxt"</span></code><code data-key='xmp'>  ]</code><code data-key='xmp'><span class="log">}</span></code></div></pre>
                </div>
                <div class="rightDraw">
                <div class="menu"><div class="directory">目录</div><ul class="menuCon"><li class="menu_li"><a href="#pinia" id="AE927315" class="">pinia</a><ul class="menuCon_1"><li class="menu_li0"><a href="#如何初始化store" id="AH709353" class="">如何初始化store</a><ul class="menuCon_2"><li class="menu_li0"><a href="#第一步" id="DK589552">第一步</a></li><li class="menu_li1"><a href="#第二步" id="gD219593" class="">第二步</a></li></ul></li><li class="menu_li1"><a href="#如何使用" id="NL991506">如何使用</a><ul class="menuCon_3"><li class="menu_li0"><a href="#vue3" id="eb876995" class="">vue3</a></li><li class="menu_li1"><a href="#vue2.0" id="hi563434" class="">vue2.0</a></li></ul></li><li class="menu_li2"><a href="#插件使用" id="He099761" class="">插件使用</a></li><li class="menu_li3"><a href="#Nuxtjs中使用" id="aA619750">Nuxtjs中使用</a><ul class="menuCon_4"><li class="menu_li0"><a href="#下载" id="NI140041">下载</a></li><li class="menu_li1"><a href="#配置" id="Fh796203" class="">配置</a></li><li class="menu_li2"><a href="#使用" id="gg300677">使用</a></li><li class="menu_li3"><a href="#TypeScript" id="ii333458">TypeScript</a></li></ul></li></ul></li></ul></div>
                </div>
              </div>
           </div>
           <svg t="1648304059372" class="icon up" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3132" width="200" height="200"><path d="M832 64 192 64C121.6 64 64 121.6 64 192l0 640c0 70.4 57.6 128 128 128l640 0c70.4 0 128-57.6 128-128L960 192C960 121.6 902.4 64 832 64zM762.24 759.04c-12.8 12.8-33.28 12.8-45.44 0L513.92 560l-202.24 199.04c-12.8 12.8-33.28 12.8-45.44 0-12.8-12.8-12.8-32.64 0-45.44l224-220.16c6.4-6.4 15.36-9.6 24.32-8.96C522.88 483.84 531.2 487.04 538.24 493.44l224 220.16C775.04 726.4 775.04 746.24 762.24 759.04zM762.24 503.04c-12.8 12.8-33.28 12.8-45.44 0L513.92 304 311.68 503.04c-12.8 12.8-33.28 12.8-45.44 0-12.8-12.8-12.8-32.64 0-45.44l224-220.16c6.4-6.4 15.36-9.6 24.32-8.96C522.88 227.84 531.2 231.04 538.24 237.44l224 220.16C775.04 470.4 775.04 490.24 762.24 503.04z" p-id="3133" fill="#ffffff"></path></svg>
        </div>
        </body>
           <script>let titles = [{"title":"pinia","id":"pinia","index":2,"class":"AE927315","children":[{"title":"如何初始化store","id":"如何初始化store","index":3,"class":"AH709353","children":[{"title":"第一步","id":"第一步","index":4,"class":"DK589552"},{"title":"第二步","id":"第二步","index":4,"class":"gD219593"}]},{"title":"如何使用","id":"如何使用","index":3,"class":"NL991506","children":[{"title":"vue3","id":"vue3","index":4,"class":"eb876995"},{"title":"vue2.0","id":"vue2.0","index":4,"class":"hi563434"}]},{"title":"插件使用","id":"插件使用","index":3,"class":"He099761"},{"title":"Nuxtjs中使用","id":"Nuxtjs中使用","index":3,"class":"aA619750","children":[{"title":"下载","id":"下载","index":4,"class":"NI140041"},{"title":"配置","id":"配置","index":4,"class":"Fh796203"},{"title":"使用","id":"使用","index":4,"class":"gg300677"},{"title":"TypeScript","id":"TypeScript","index":4,"class":"ii333458"}]}]}];</script>
           <script src="../index.js" type="text/javascript"></script>
           </html>
            