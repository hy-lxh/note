
        <!DOCTYPE html>
         <html lang="en">
         <head>
	     <meta charset="UTF-8">
         <meta name="keywords" content="前端性能,博客,前端"/>
         <meta name="description" content="前端性能优化笔记"/>
         <!--<meta http-equiv="content-security-policy" content="default-src self"/>-->
	     <title>前端性能</title>
        </head>
        <link rel="stylesheet" href="../main.css">
        <body>
        <div class="message_box"></div>
        <div class="content">
           <div id="view">
              <div>
                <div class="bs_content">
                   <h2 id='前端各方面性能优化' class='YX713634'>前端各方面性能优化</h2><h3 id='图片' class='AB255596'>图片</h3><h4 id='延迟加载' class='hf238908'>延迟加载</h4><p class="indent">延迟加载图像和视频会严重降低网站上的初始加载时间和页面负载。如果网站中有大量内嵌图像，这是减少不必要下载的绝佳方式。</p><h5 id='浏览器延迟加载' class='hG212318'>浏览器延迟加载</h5><p class="indent">Chrome 和 Firefox 都支持通过<span class="highlight"> loading </span> 属性实现延迟加载。此属性可以添加到img元素中,lazy 会值告诉浏览器，如果图像位于时区，则立即加载图像，并在用户滚动到它们附近时获取其他图像。</p><p class="remind">属性值</p><div style='width: 100%;position: relative;display: inline-block;'><table data-key='table'><tr><td>eager</td><td>默认值 不管在不在视图区域都加载</td></tr><tr><td>lazy</td><td>延迟加载图像，直到它和视口接近到一个计算得到的距离(浏览器定义)</td></tr></table></div><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div class='indexPre'><div class='index'>1.</div></div><div class="codePre"><code data-key='xmp'><span class='angleBracket'>&lt;</span><span class='elName'>img</span><span class='attrKey'> loading</span><span class='angleBracket'>=</span><span class='attrValue'>"lazy"</span><span class='attrKey'> src</span><span class='angleBracket'>=</span><span class='attrValue'>"1.png"</span>/<span class='angleBracket'>&gt;</span></code></div></pre><h5 id='IntersectionObserver api' class='CM474938'>IntersectionObserver api</h5><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div class='indexPre'><div class='index'>1.</div></div><div class="codePre"><code data-key='xmp'><span class='angleBracket'>&lt;</span><span class='elName'>img</span><span class='attrKey'> data-src</span><span class='angleBracket'>=</span><span class='attrValue'>"1.png"</span><span class='attrKey'> data-srcset</span><span class='angleBracket'>=</span><span class='attrValue'>"1-2x.png 2x,1-1x.png 1x"</span><span class='attrKey'> class</span><span class='angleBracket'>=</span><span class='attrValue'>"lazy"</span>/<span class='angleBracket'>&gt;</span></code></div></pre><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div class='indexPre'><div class='index'>1.</div><div class='index'>2.</div><div class='index'>3.</div><div class='index'>4.</div><div class='index'>5.</div><div class='index'>6.</div><div class='index'>7.</div><div class='index'>8.</div><div class='index'>9.</div><div class='index'>10.</div><div class='index'>11.</div><div class='index'>12.</div><div class='index'>13.</div><div class='index'>14.</div><div class='index'>15.</div><div class='index'>16.</div></div><div class="codePre"><code data-key='xmp'>window<span class="log">.</span><span class="title1">addEventListener</span><span class="log">(</span><span class="string">"DOMContentLoaded"</span>,<span class="log">(</span><span class="log">)</span><span class="log"> => </span><span class="log">{</span></code><code data-key='xmp'>  <span class="title"><span class="let">if</span><span class="log">(</span></span><span class="string">"IntersectionObserver"</span> <span class="let">in</span> window<span class="log">)</span><span class="log">{</span></code><code data-key='xmp'>    <span class="let">let </span>lazyObserver <span class="let">=</span><span class="let"> new </span><span class="title">IntersectionObserver<span class="log">(</span></span><span class="log">(</span>entries<span class="log">)</span><span class="log"> => </span><span class="log">{</span></code><code data-key='xmp'>      entries<span class="log">.</span><span class="title1">forEach</span><span class="log">(</span>entry<span class="log"> => </span><span class="log">{</span></code><code data-key='xmp'>        <span class="title"><span class="let">if</span><span class="log">(</span></span>entry<span class="log">.</span><span class="title1">isIntersecting</span><span class="log">)</span><span class="log">{</span></code><code data-key='xmp'>          <span class="let">const </span>img <span class="let">=</span> entry<span class="log">.</span><span class="title1">target</span>,<span class="log">{</span>src,srcset<span class="log">}</span> <span class="let">=</span> img<span class="log">.</span><span class="title1">dataset</span>;</code><code data-key='xmp'>          img<span class="log">.</span><span class="title1">src</span> <span class="let">=</span> src;</code><code data-key='xmp'>          img<span class="log">.</span><span class="title1">srcset</span> <span class="let">=</span> srcset;</code><code data-key='xmp'>          img<span class="log">.</span><span class="title1">classList</span><span class="log">.</span><span class="title1">remove</span><span class="log">(</span><span class="string">"lazy"</span><span class="log">)</span>;</code><code data-key='xmp'>          lazyObserver<span class="log">.</span><span class="title1">unobserve</span><span class="log">(</span>img<span class="log">)</span>;</code><code data-key='xmp'>        <span class="log">}</span></code><code data-key='xmp'>      <span class="log">}</span><span class="log">)</span>;</code><code data-key='xmp'>      Array<span class="log">.</span><span class="title1"><span class="let">from</span></span><span class="log">(</span>document<span class="log">.</span><span class="title1">getElementsByClassName</span><span class="log">(</span><span class="string">"lazy"</span><span class="log">)</span><span class="log">)</span><span class="log">.</span><span class="title1">forEach</span><span class="log">(</span>img<span class="log"> => </span>lazyObserver<span class="log">.</span><span class="title1">observe</span><span class="log">(</span>img<span class="log">)</span><span class="log">)</span>;</code><code data-key='xmp'>    <span class="log">}</span><span class="log">)</span>;</code><code data-key='xmp'>  <span class="log">}</span></code><code data-key='xmp'><span class="log">}</span>,false<span class="log">)</span></code></div></pre><h5 id='插件' class='cB308959'>插件</h5><div style='width: 100%;position: relative;display: inline-block;'><table data-key='table'><tr><td>lazysizes</td><td>它会自动绑定到 img 元素上 lazyload 类，并要求您在 data-src 和/或 data-srcset 属性中指定图像的 URL，并将其内容分别交换至 src 和/或 srcset属性。它使用 Intersection Observer（可以对其进行 polyfill），并可以使用许多插件进行扩展来执行诸如延迟加载视频之类的操作。</td></tr><tr><td>vanilla-lazyload</td><td>是用于延迟加载图像、背景图像、视频、iframe 和脚本的轻量级选项。它利用 Intersection Observer，支持响应式图像，并能开启浏览器级的延迟加载。</td></tr><tr><td>lozad.js</td><td>是另一个仅使用 Intersection Observer 的轻量级选项。因此它的性能很好，但需要先进行 polyfill 然后才能在较旧的浏览器上使用。</td></tr><tr><td>react-lazyload </td><td>react使用</td></tr><tr><td>vue-lazyload</td><td>vue使用</td></tr></table></div><h4 id='imagemin压缩' class='Gc502034'>imagemin压缩</h4><p class="indent">Imagemin 是图像压缩的绝佳选择，因为它支持多种图像格式，并且很容易与构建脚本和构建工具集成。Imagemin 可用作 CLI 和 npm 模块。</p><h5 id='插件' class='XA479168'>插件</h5><div style='width: 100%;position: relative;display: inline-block;'><table data-key='table'><tr><td>图像格式</td><td>	有损插件</td><td>	无损插件</td></tr><tr><td>JPEG</td><td>	imagemin-mozjpeg</td><td>	imagemin-jpegtran</td></tr><tr><td>PNG</td><td>	imagemin-pngquant</td><td>	imagemin-optipng</td></tr><tr><td>GIF</td><td>	imagemin-giflossy</td><td>	imagemin-gifsicle</td></tr><tr><td>SVG</td><td>	Imagemin-svgo</td></tr><tr><td>WebP</td><td>	imagemin-webp</td></tr></table></div><h5 id='cli输出' class='jG292332'>cli输出</h5><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div class='indexPre'><div class='index'>1.</div><div class='index'>2.</div><div class='index'>3.</div></div><div class="codePre"><code data-key='xmp'><span class="green">imagemin 入口文件夹或文件 <span class="let">-</span><span class="let">-</span>out<span class="let">-</span>dir=输出文件夹</span></code><code data-key='xmp'><span class="green">imagemin会根据图片类型去选择合适的插件</span></code><code data-key='xmp'>imagemin images/* <span class="let">-</span><span class="let">-</span>out<span class="let">-</span>dir=images/</code></div></pre><h5 id='node脚本' class='HI215106'>node脚本</h5><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div style='height: 14px;'></div><div class='indexPre'><div class='index'>1.</div><div class='index'>2.</div><div class='index'>3.</div><div class='index'>4.</div><div class='index'>5.</div><div class='index'>6.</div><div class='index'>7.</div><div class='index'>8.</div><div class='index'>9.</div><div class='index'>10.</div><div class='index'>11.</div><div class='index'>12.</div><div class='index'>13.</div></div><div class="codePre"><code data-key='xmp'><span class="let">const </span>imagemin <span class="let">=</span> <span class="title">require<span class="log">(</span></span>'imagemin'<span class="log">)</span>;</code><code data-key='xmp'><span class="let">const </span>imageminMozjpeg <span class="let">=</span> <span class="title">require<span class="log">(</span></span>'imagemin<span class="let">-</span>mozjpeg'<span class="log">)</span>;</code><code data-key='xmp'><span class="log">(</span><span class="let">async</span><span class="log">(</span><span class="log">)</span><span class="log"> => </span><span class="log">{</span></code><code data-key='xmp'>  <span class="let">const </span>files <span class="let">=</span> <span class="let">await </span><span class="title">imagemin<span class="log">(</span></span></code><code data-key='xmp'>      ['source_dir/*<span class="log">.</span>jpg', 'another_dir/*<span class="log">.</span>jpg'],</code><code data-key='xmp'>      <span class="log">{</span></code><code data-key='xmp'>        destination: 'destination_dir',</code><code data-key='xmp'>        plugins: [imageminMozjpeg<span class="log">(</span><span class="log">{</span>quality<span class="colonColor">: </span><span class="typeColor">50<span class="log">}</span></span><span class="log">)</span>]</code><code data-key='xmp'>      <span class="log">}</span></code><code data-key='xmp'>  <span class="log">)</span>;</code><code data-key='xmp'>  console<span class="log">.</span><span class="title1">log</span><span class="log">(</span>files<span class="log">)</span>;</code><code data-key='xmp'>  <span class="green">最后可以遍历再写入导出即可</span></code><code data-key='xmp'><span class="log">}</span><span class="log">)</span><span class="log">(</span><span class="log">)</span>;</code></div></pre><p class="indent">同样在webpack、glup等构建工具中也能够使用imagemin</p><h5 id='webpack构建' class='CX253863'>webpack构建</h5><p class="indent">webpack图片一般是有压缩的,但耗时</p><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div class='indexPre'><div class='index'>1.</div></div><div class="codePre"><code data-key='xmp'>npm install imagemin<span class="let">-</span>gifsicle imagemin<span class="let">-</span>jpegtran imagemin<span class="let">-</span>optipng imagemin<span class="let">-</span>svgo <span class="let">-</span><span class="let">-</span>save<span class="let">-</span>dev</code></div></pre><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div style='height: 14px;'></div><div style='height: 14px;'></div><div class='indexPre'><div class='index'>1.</div><div class='index'>2.</div><div class='index'>3.</div><div class='index'>4.</div><div class='index'>5.</div><div class='index'>6.</div><div class='index'>7.</div><div class='index'>8.</div><div class='index'>9.</div><div class='index'>10.</div><div class='index'>11.</div><div class='index'>12.</div><div class='index'>13.</div><div class='index'>14.</div><div class='index'>15.</div><div class='index'>16.</div><div class='index'>17.</div><div class='index'>18.</div><div class='index'>19.</div><div class='index'>20.</div><div class='index'>21.</div><div class='index'>22.</div><div class='index'>23.</div><div class='index'>24.</div><div class='index'>25.</div><div class='index'>26.</div><div class='index'>27.</div><div class='index'>28.</div><div class='index'>29.</div><div class='index'>30.</div><div class='index'>31.</div><div class='index'>32.</div><div class='index'>33.</div><div class='index'>34.</div><div class='index'>35.</div><div class='index'>36.</div><div class='index'>37.</div><div class='index'>38.</div><div class='index'>39.</div><div class='index'>40.</div><div class='index'>41.</div><div class='index'>42.</div><div class='index'>43.</div><div class='index'>44.</div><div class='index'>45.</div><div class='index'>46.</div><div class='index'>47.</div><div class='index'>48.</div><div class='index'>49.</div></div><div class="codePre"><code data-key='xmp'><span class="let">const </span>optimization <span class="let">=</span> <span class="log">{</span></code><code data-key='xmp'>  minimizer: []</code><code data-key='xmp'><span class="log">}</span>;</code><code data-key='xmp'><span class="let">if</span><span class="log">(</span>process<span class="log">.</span><span class="title1">env</span><span class="log">.</span><span class="title1">NODE_ENV</span> <span class="let">===</span> <span class="string">"production"</span><span class="log">)</span><span class="log">{</span></code><code data-key='xmp'>  <span class="let">const </span>ImageMinimizerPlugin <span class="let">=</span> <span class="title">require<span class="log">(</span></span><span class="string">"image-minimizer-webpack-plugin"</span><span class="log">)</span>;</code><code data-key='xmp'>  <span class="let">const </span>imageMinimizerPlugin <span class="let">=</span><span class="let"> new </span><span class="title">ImageMinimizerPlugin<span class="log">(</span></span><span class="log">{</span></code><code data-key='xmp'>      minimizer: <span class="log">{</span></code><code data-key='xmp'>        implementation: ImageMinimizerPlugin<span class="log">.</span><span class="title1">imageminMinify</span>,  <span class="green">共有imageminMinify和squooshMinify两种模式</span></code><code data-key='xmp'>        options: <span class="log">{</span></code><code data-key='xmp'>          plugins: [</code><code data-key='xmp'>            [<span class="string">"gifsicle"</span>, <span class="log">{</span> interlaced: <span class="let">true</span> <span class="log">}</span>],</code><code data-key='xmp'>            [<span class="string">"jpegtran"</span>, <span class="log">{</span> progressive: <span class="let">true</span> <span class="log">}</span>],</code><code data-key='xmp'>            [<span class="string">"optipng"</span>, <span class="log">{</span> optimizationLevel: 5 <span class="log">}</span>],</code><code data-key='xmp'>            [<span class="string">"svgo"</span>, <span class="log">{</span></code><code data-key='xmp'>              plugins: [</code><code data-key='xmp'>                'preset<span class="let">-</span>default',</code><code data-key='xmp'>                <span class="log">{</span></code><code data-key='xmp'>                  name: <span class="string">"removeViewBox"</span>,</code><code data-key='xmp'>                  active: <span class="let">false</span>,</code><code data-key='xmp'>                <span class="log">}</span>,</code><code data-key='xmp'>                <span class="log">{</span></code><code data-key='xmp'>                  name: <span class="string">"addAttributesToSVGElement"</span>,</code><code data-key='xmp'>                  params: <span class="log">{</span></code><code data-key='xmp'>                    attributes: [<span class="log">{</span> xmlns: <span class="string">"http://www.w3.org/2000/svg"</span> <span class="log">}</span>],</code><code data-key='xmp'>                  <span class="log">}</span>,</code><code data-key='xmp'>                <span class="log">}</span>,</code><code data-key='xmp'>              ],</code><code data-key='xmp'>            <span class="log">}</span>,</code><code data-key='xmp'>            ],</code><code data-key='xmp'>          ],</code><code data-key='xmp'>        <span class="log">}</span>,</code><code data-key='xmp'>      <span class="log">}</span>,</code><code data-key='xmp'>  <span class="log">}</span><span class="log">)</span>;</code><code data-key='xmp'>  optimization<span class="log">.</span><span class="title1">minimizer</span><span class="log">.</span><span class="title1">push</span><span class="log">(</span>imageMinimizerPlugin<span class="log">)</span>;</code><code data-key='xmp'><span class="log">}</span></code><code data-key='xmp'>module<span class="log">.</span><span class="title1">exports</span> <span class="let">=</span> <span class="log">{</span></code><code data-key='xmp'>    <span class="green"><span class="log">.</span><span class="log">.</span><span class="log">.</span></span></code><code data-key='xmp'>    module: <span class="log">{</span></code><code data-key='xmp'>      rules: [</code><code data-key='xmp'>         <span class="green"><span class="log">.</span><span class="log">.</span><span class="log">.</span></span></code><code data-key='xmp'>         <span class="log">{</span></code><code data-key='xmp'>           test: /\<span class="log">.</span><span class="log">(</span>jpe?g<span class="let">|</span>png<span class="let">|</span>gif<span class="let">|</span>svg<span class="log">)</span>$/i,</code><code data-key='xmp'>           type: <span class="string">"asset"</span>,</code><code data-key='xmp'>         <span class="log">}</span>,</code><code data-key='xmp'>      ]</code><code data-key='xmp'>    <span class="log">}</span>,</code><code data-key='xmp'>    optimization  </code><code data-key='xmp'>    <span class="green"><span class="log">.</span><span class="log">.</span><span class="log">.</span></span></code><code data-key='xmp'><span class="log">}</span></code></div></pre>
                </div>
                <div class="rightDraw">
                <div class="menu"><div class="directory">目录</div><ul class="menuCon"><li class="menu_li"><a href="#前端各方面性能优化" id="YX713634" class="">前端各方面性能优化</a><ul class="menuCon_1"><li class="menu_li0"><a href="#图片" id="AB255596">图片</a><ul class="menuCon_2"><li class="menu_li0"><a href="#延迟加载" id="hf238908">延迟加载</a><ul class="menuCon_3"><li class="menu_li0"><a href="#浏览器延迟加载" id="hG212318">浏览器延迟加载</a></li><li class="menu_li1"><a href="#IntersectionObserver api" id="CM474938">IntersectionObserver api</a></li><li class="menu_li2"><a href="#插件" id="cB308959">插件</a></li></ul></li><li class="menu_li1"><a href="#imagemin压缩" id="Gc502034">imagemin压缩</a><ul class="menuCon_4"><li class="menu_li0"><a href="#插件" id="XA479168">插件</a></li><li class="menu_li1"><a href="#cli输出" id="jG292332">cli输出</a></li><li class="menu_li2"><a href="#node脚本" id="HI215106">node脚本</a></li><li class="menu_li3"><a href="#webpack构建" id="CX253863">webpack构建</a></li></ul></li></ul></li></ul></li></ul></div>
                </div>
              </div>
           </div>
           <svg t="1648304059372" class="icon up" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3132" width="200" height="200"><path d="M832 64 192 64C121.6 64 64 121.6 64 192l0 640c0 70.4 57.6 128 128 128l640 0c70.4 0 128-57.6 128-128L960 192C960 121.6 902.4 64 832 64zM762.24 759.04c-12.8 12.8-33.28 12.8-45.44 0L513.92 560l-202.24 199.04c-12.8 12.8-33.28 12.8-45.44 0-12.8-12.8-12.8-32.64 0-45.44l224-220.16c6.4-6.4 15.36-9.6 24.32-8.96C522.88 483.84 531.2 487.04 538.24 493.44l224 220.16C775.04 726.4 775.04 746.24 762.24 759.04zM762.24 503.04c-12.8 12.8-33.28 12.8-45.44 0L513.92 304 311.68 503.04c-12.8 12.8-33.28 12.8-45.44 0-12.8-12.8-12.8-32.64 0-45.44l224-220.16c6.4-6.4 15.36-9.6 24.32-8.96C522.88 227.84 531.2 231.04 538.24 237.44l224 220.16C775.04 470.4 775.04 490.24 762.24 503.04z" p-id="3133" fill="#ffffff"></path></svg>
        </div>
        </body>
           <script>let titles = [{"title":"前端各方面性能优化","id":"前端各方面性能优化","index":2,"class":"YX713634","children":[{"title":"图片","id":"图片","index":3,"class":"AB255596","children":[{"title":"延迟加载","id":"延迟加载","index":4,"class":"hf238908","children":[{"title":"浏览器延迟加载","id":"浏览器延迟加载","index":5,"class":"hG212318"},{"title":"IntersectionObserver api","id":"IntersectionObserver api","index":5,"class":"CM474938"},{"title":"插件","id":"插件","index":5,"class":"cB308959"}]},{"title":"imagemin压缩","id":"imagemin压缩","index":4,"class":"Gc502034","children":[{"title":"插件","id":"插件","index":5,"class":"XA479168"},{"title":"cli输出","id":"cli输出","index":5,"class":"jG292332"},{"title":"node脚本","id":"node脚本","index":5,"class":"HI215106"},{"title":"webpack构建","id":"webpack构建","index":5,"class":"CX253863"}]}]}]}];</script>
           <script src="../index.js" type="text/javascript"></script>
           </html>
            