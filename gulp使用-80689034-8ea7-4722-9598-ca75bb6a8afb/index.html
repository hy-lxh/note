
        <!DOCTYPE html>
         <html lang="en">
         <head>
	     <meta charset="UTF-8">
         <meta name="keywords" content="gulp使用,博客,前端"/>
         <meta name="description" content="gulp基本使用方法"/>
         <!--<meta http-equiv="content-security-policy" content="default-src self"/>-->
	     <title>gulp使用</title>
        </head>
        <link rel="stylesheet" href="../main.css">
        <body>
        <div class="message_box"></div>
        <div class="content">
           <div id="view">
              <div>
                <div class="bs_content">
                   <h2 id='gulp使用' class='NX347421'>gulp使用</h2><h3 id='环境配置' class='AE193560'>环境配置</h3><p class="remind">全局安装gulp-cli</p><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div class='indexPre'><div class='index'>1.</div></div><div class="codePre"><code data-key='xmp'>npm i <span class="let">-</span>g gulp<span class="let">-</span>cli</code></div></pre><p class="remind">初始化项目</p><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div class='indexPre'><div class='index'>1.</div><div class='index'>2.</div><div class='index'>3.</div><div class='index'>4.</div><div class='index'>5.</div><div class='index'>6.</div><div class='index'>7.</div><div class='index'>8.</div><div class='index'>9.</div><div class='index'>10.</div><div class='index'>11.</div><div class='index'>12.</div></div><div class="codePre"><code data-key='xmp'><span class="green">//创建项目文件夹</span></code><code data-key='xmp'>mkdir project<span class="let">-</span>name</code><code data-key='xmp'><span class="green">//进入项目根目录</span></code><code data-key='xmp'>cd project<span class="let">-</span>name</code><code data-key='xmp'><span class="green">//初始化package<span class="log">.</span><span class="title1">json</span>文件</span></code><code data-key='xmp'>npm init <span class="let">-</span>y</code><code data-key='xmp'><span class="green">//下载项目中下载glup</span></code><code data-key='xmp'>npm i gulp <span class="let">-</span><span class="let">-</span>save</code><code data-key='xmp'><span class="green">//创建gulp配置文件</span></code><code data-key='xmp'>touch gulpfile<span class="log">.</span><span class="log">(</span>js<span class="let"> | </span>ts<span class="log">)</span></code><code data-key='xmp'><span class="green">//在gulpfile文件中设置一些task</span></code><code data-key='xmp'><span class="green">//项目根目录执行gulp命令就可以开始执行gulpfile文件中的task</span></code></div></pre><h3 id='基本使用' class='Ij756595'>基本使用</h3><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div class='indexPre'><div class='index'>1.</div><div class='index'>2.</div><div class='index'>3.</div><div class='index'>4.</div><div class='index'>5.</div><div class='index'>6.</div><div class='index'>7.</div><div class='index'>8.</div><div class='index'>9.</div><div class='index'>10.</div><div class='index'>11.</div><div class='index'>12.</div><div class='index'>13.</div><div class='index'>14.</div></div><div class="codePre"><code data-key='xmp'><span class="green">//使用gulp基本上也就使用4个属性 src、dest</span></code><code data-key='xmp'><span class="green">//通过commonjs模块化导出default，default是所有任务的执行方法</span></code><code data-key='xmp'><span class='let'>function</span> <span class="title">task<span class="log">(</span></span>done<span class="log">)</span><span class="log">{</span></code><code data-key='xmp'>  <span class="green">//src是指向的文件位置,*<span class="log">.</span>js表示当前目录下的所有js</span></code><code data-key='xmp'>  <span class="green">//<span class="log">.</span>/src/**/*<span class="log">.</span>js表示src目录下的任何文件夹下的js文件</span></code><code data-key='xmp'>  <span class="green">//src可以传递单个文件地址,也可传递一个数组,并且可以是不能类型文件，比如ts和js文件、css和less文件</span></code><code data-key='xmp'>  <span class="green">//dest是设置输出目录,再最后可以使用on监听end结束事件执行done</span></code><code data-key='xmp'>  <span class="green">//编写一个移动文件的任务,比如说要把src/imgs下面的所有图片移动到dist下面的imgs</span></code><code data-key='xmp'>  <span class="green">//如果还要压缩图片,可以下载gulp<span class="let">-</span>imagemin然后引入在src后通过pipe执行</span></code><code data-key='xmp'><span class="let">  const </span>imagemin <span class="let">=</span> <span class="title">require<span class="log">(</span></span><span class="string">"gulp-imagemin"</span><span class="log">)</span></code><code data-key='xmp'>  <span class="let">return</span> <span class="title">src<span class="log">(</span></span>[<span class="string">"./src/imgs/*.jpg"</span>,<span class="string">"./src/imgs/*.png"</span>,<span class="string">"./src/imgs/*.jpeg"</span>]<span class="log">)</span></code><code data-key='xmp'>        <span class="log">.</span>pipe<span class="log">(</span>imagemin<span class="log">(</span><span class="log">)</span><span class="log">)</span></code><code data-key='xmp'>        <span class="log">.</span>pipe<span class="log">(</span>dest<span class="log">(</span><span class="string">"./dist/imgs/"</span><span class="log">)</span><span class="log">)</span><span class="log">.</span><span class="title1">on</span><span class="log">(</span><span class="string">"end"</span>,done<span class="log">)</span>;</code><code data-key='xmp'><span class="log">}</span></code></div></pre><p class="remind">执行多个task</p><p class="indent">gulp提供了series和parallel来执行多个task,series是按照顺序执行,而parallel是多个任务并发执行</p><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div class='indexPre'><div class='index'>1.</div><div class='index'>2.</div><div class='index'>3.</div><div class='index'>4.</div><div class='index'>5.</div><div class='index'>6.</div><div class='index'>7.</div><div class='index'>8.</div><div class='index'>9.</div><div class='index'>10.</div><div class='index'>11.</div><div class='index'>12.</div><div class='index'>13.</div><div class='index'>14.</div><div class='index'>15.</div><div class='index'>16.</div><div class='index'>17.</div><div class='index'>18.</div><div class='index'>19.</div><div class='index'>20.</div><div class='index'>21.</div><div class='index'>22.</div><div class='index'>23.</div><div class='index'>24.</div><div class='index'>25.</div><div class='index'>26.</div><div class='index'>27.</div><div class='index'>28.</div><div class='index'>29.</div><div class='index'>30.</div></div><div class="codePre"><code data-key='xmp'><span class="green">//举个例子,就是在构建之前我们需要清除上一次构建的文件再去构建这次的任务,这肯定是同步执行的</span></code><code data-key='xmp'><span class="let">const </span>path <span class="let">=</span> <span class="title">require<span class="log">(</span></span><span class="string">"path"</span><span class="log">)</span>;</code><code data-key='xmp'><span class="let">const </span>fs <span class="let">=</span> <span class="title">require<span class="log">(</span></span><span class="string">"fs"</span><span class="log">)</span>;</code><code data-key='xmp'><span class="let">const </span>htmlmin <span class="let">=</span> <span class="title">require<span class="log">(</span></span><span class="string">"gulp-htmlmin"</span><span class="log">)</span>;</code><code data-key='xmp'><span class="let">const </span>cleanTask <span class="let">=</span> <span class="log">(</span>done,output<span class="log">)</span><span class="log"> => </span><span class="log">{</span></code><code data-key='xmp'>  output <span class="let">=</span> output<span class="let"> || </span>path<span class="log">.</span><span class="title1">resolve</span><span class="log">(</span>__dirname,<span class="string">"./dist"</span><span class="log">)</span>;</code><code data-key='xmp'><span class="let">   let </span>files <span class="let">=</span> fs<span class="log">.</span><span class="title1">readdirSync</span><span class="log">(</span>output<span class="log">)</span>;</code><code data-key='xmp'>  files<span class="log">.</span><span class="title1">forEach</span><span class="log">(</span>file<span class="log"> => </span><span class="log">{</span></code><code data-key='xmp'><span class="let">    let </span>dir <span class="let">=</span> output <span class="let">+</span> <span class="string">"/"</span> <span class="let">+</span> file;</code><code data-key='xmp'>    <span class="title"><span class="let">if</span><span class="log">(</span></span>fs<span class="log">.</span><span class="title1">statSync</span><span class="log">(</span>dir<span class="log">)</span><span class="log">.</span><span class="title1">isDirectory</span><span class="log">(</span><span class="log">)</span><span class="log">)</span><span class="log">{</span></code><code data-key='xmp'>      <span class="green">//还是文件夹,递归删除</span></code><code data-key='xmp'>      <span class="title">clean<span class="log">(</span></span><span class='keyword'>null</span>,dir<span class="log">)</span>;</code><code data-key='xmp'>    <span class="log">}</span><span class="let">else</span><span class="log">{</span></code><code data-key='xmp'>      <span class="green">//文件,直接删除</span></code><code data-key='xmp'>      fs<span class="log">.</span><span class="title1">unlink</span><span class="log">(</span>dir<span class="log">)</span></code><code data-key='xmp'>    <span class="log">}</span></code><code data-key='xmp'>  <span class="log">}</span><span class="log">)</span>;</code><code data-key='xmp'>  <span class="green">//删除项目中所有文件后直接删除文件夹</span></code><code data-key='xmp'>  fs<span class="log">.</span><span class="title1">rmdirSync</span><span class="log">(</span>output<span class="log">)</span>;</code><code data-key='xmp'>  <span class="log">(</span>done <span class="let">&</span><span class="let">&</span> <span class="title">done<span class="log">(</span></span><span class="log">)</span><span class="log">)</span>;</code><code data-key='xmp'><span class="log">}</span></code><code data-key='xmp'><span class="let">const </span>buildJs <span class="let">=</span> <span class="log">(</span>done<span class="log">)</span><span class="log"> => </span><span class="title">done<span class="log">(</span></span><span class="log">)</span>;<span class="green">//省</span></code><code data-key='xmp'><span class="let">const </span>buildCss <span class="let">=</span> <span class="log">(</span>done<span class="log">)</span><span class="log"> => </span><span class="title">done<span class="log">(</span></span><span class="log">)</span>;<span class="green">//省</span></code><code data-key='xmp'><span class="let">const </span>buildHtml <span class="let">=</span> <span class="log">(</span>done<span class="log">)</span><span class="log"> => </span><span class="log">{</span></code><code data-key='xmp'>  <span class="let">return</span> <span class="title">src<span class="log">(</span></span><span class="string">"./src/index.html"</span><span class="log">)</span></code><code data-key='xmp'>  <span class="log">.</span>pipe<span class="log">(</span>inject<span class="log">(</span>src<span class="log">(</span>[<span class="string">"./dist/css/*.css"</span>,<span class="string">"./dist/js/*.js"</span>]<span class="log">)</span>,<span class="log">{</span>relative<span class="colonColor">: </span><span class="typeColor">true<span class="log">}</span><span class="log">)</span></span><span class="log">)</span></code><code data-key='xmp'>  <span class="log">.</span>pipe<span class="log">(</span>dest<span class="log">(</span><span class="string">"./dist/"</span><span class="log">)</span><span class="log">)</span><span class="log">.</span><span class="title1">on</span><span class="log">(</span><span class="string">"end"</span>,done<span class="log">)</span>;</code><code data-key='xmp'><span class="log">}</span></code><code data-key='xmp'><span class="green">//buildJs和buildCss可以同时并行处理,但是clean和buildHtml都得按照顺序执行,因为buildHtml需要依赖处理完成的js和css</span></code><code data-key='xmp'>module<span class="log">.</span><span class="title1">exports</span><span class="log">.</span><span class="title1">default</span> <span class="let">=</span> <span class="title">series<span class="log">(</span></span>clean,parallel<span class="log">(</span>buildJs,buildCss<span class="log">)</span>,buildHtml<span class="log">)</span>;</code></div></pre><h3 id='完整的' class='Ze147215'>完整的</h3><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div style='height: 14px;'></div><div style='height: 14px;'></div><div style='height: 14px;'></div><div style='height: 14px;'></div><div style='height: 14px;'></div><div style='height: 14px;'></div><div style='height: 14px;'></div><div class='indexPre'><div class='index'>1.</div><div class='index'>2.</div><div class='index'>3.</div><div class='index'>4.</div><div class='index'>5.</div><div class='index'>6.</div><div class='index'>7.</div><div class='index'>8.</div><div class='index'>9.</div><div class='index'>10.</div><div class='index'>11.</div><div class='index'>12.</div><div class='index'>13.</div><div class='index'>14.</div><div class='index'>15.</div><div class='index'>16.</div><div class='index'>17.</div><div class='index'>18.</div><div class='index'>19.</div><div class='index'>20.</div><div class='index'>21.</div><div class='index'>22.</div><div class='index'>23.</div><div class='index'>24.</div><div class='index'>25.</div><div class='index'>26.</div><div class='index'>27.</div><div class='index'>28.</div><div class='index'>29.</div><div class='index'>30.</div><div class='index'>31.</div><div class='index'>32.</div><div class='index'>33.</div><div class='index'>34.</div><div class='index'>35.</div><div class='index'>36.</div><div class='index'>37.</div><div class='index'>38.</div><div class='index'>39.</div><div class='index'>40.</div><div class='index'>41.</div><div class='index'>42.</div><div class='index'>43.</div><div class='index'>44.</div><div class='index'>45.</div><div class='index'>46.</div><div class='index'>47.</div><div class='index'>48.</div><div class='index'>49.</div><div class='index'>50.</div><div class='index'>51.</div><div class='index'>52.</div><div class='index'>53.</div><div class='index'>54.</div><div class='index'>55.</div><div class='index'>56.</div><div class='index'>57.</div><div class='index'>58.</div><div class='index'>59.</div><div class='index'>60.</div><div class='index'>61.</div><div class='index'>62.</div><div class='index'>63.</div><div class='index'>64.</div><div class='index'>65.</div></div><div class="codePre"><code data-key='xmp'><span class="let">const </span><span class="log">{</span> src, dest, series, parallel <span class="log">}</span> <span class="let">=</span> <span class="title">require<span class="log">(</span></span><span class="string">"gulp"</span><span class="log">)</span>;</code><code data-key='xmp'><span class="let">const </span>minifyCSS <span class="let">=</span> <span class="title">require<span class="log">(</span></span><span class="string">"gulp-minify-css"</span><span class="log">)</span>;</code><code data-key='xmp'><span class="let">const </span>htmlMin <span class="let">=</span> <span class="title">require<span class="log">(</span></span><span class="string">"gulp-htmlmin"</span><span class="log">)</span>;</code><code data-key='xmp'><span class="let">const </span>less <span class="let">=</span> <span class="title">require<span class="log">(</span></span><span class="string">"gulp-less"</span><span class="log">)</span>;</code><code data-key='xmp'><span class="let">const </span>fs <span class="let">=</span> <span class="title">require<span class="log">(</span></span><span class="string">"fs"</span><span class="log">)</span>;</code><code data-key='xmp'><span class="let">const </span>path <span class="let">=</span> <span class="title">require<span class="log">(</span></span><span class="string">"path"</span><span class="log">)</span>;</code><code data-key='xmp'><span class="let">const </span>ts <span class="let">=</span> <span class="title">require<span class="log">(</span></span><span class="string">"gulp-typescript"</span><span class="log">)</span>;</code><code data-key='xmp'><span class="let">const </span>tsProject <span class="let">=</span> ts<span class="log">.</span><span class="title1">createProject</span><span class="log">(</span><span class="string">"./tsconfig.json"</span>, <span class="log">{</span> removeComments<span class="colonColor">: </span><span class="typeColor">true <span class="log">}</span><span class="log">)</span></span>;</code><code data-key='xmp'><span class="let">const </span>babel <span class="let">=</span> <span class="title">require<span class="log">(</span></span><span class="string">"gulp-babel"</span><span class="log">)</span>;</code><code data-key='xmp'><span class="let">const </span>uglify <span class="let">=</span> <span class="title">require<span class="log">(</span></span><span class="string">"gulp-uglify"</span><span class="log">)</span>;</code><code data-key='xmp'><span class="let">const </span>inject <span class="let">=</span> <span class="title">require<span class="log">(</span></span><span class="string">"gulp-inject"</span><span class="log">)</span>;</code><code data-key='xmp'><span class="let">const </span>imagemin <span class="let">=</span> <span class="title">require<span class="log">(</span></span><span class="string">"gulp-imagemin"</span><span class="log">)</span></code><code data-key='xmp'><span class="let">const </span>tap <span class="let">=</span> <span class="title">require<span class="log">(</span></span><span class="string">"gulp-tap"</span><span class="log">)</span>;</code><code data-key='xmp'><span class="let">const </span>rename <span class="let">=</span> <span class="title">require<span class="log">(</span></span><span class="string">"gulp-rename"</span><span class="log">)</span>;</code><code data-key='xmp'><span class="let">const </span>gulpIf <span class="let">=</span> <span class="title">require<span class="log">(</span></span><span class="string">"gulp-if"</span><span class="log">)</span>;</code><code data-key='xmp'><span class="green">//gulp<span class="let">-</span>concat合并文件 gulp<span class="let">-</span>rename修改名称</span></code><code data-key='xmp'><span class="let">const </span>buildHtml <span class="let">=</span> <span class="log">(</span>done<span class="log">)</span><span class="log"> => </span><span class="log">{</span></code><code data-key='xmp'>    <span class="let">return</span> <span class="title">src<span class="log">(</span></span><span class="string">"./src/index.html"</span><span class="log">)</span></code><code data-key='xmp'>    <span class="log">.</span>pipe<span class="log">(</span>tap<span class="log">(</span>file<span class="log"> => </span>file<span class="log">.</span><span class="title1">contents</span> <span class="let">=</span> Buffer<span class="log">.</span><span class="title1"><span class="let">from</span></span><span class="log">(</span>file<span class="log">.</span><span class="title1">contents</span><span class="log">.</span><span class="title1">toString</span><span class="log">(</span><span class="log">)</span><span class="log">.</span><span class="title1">replace</span><span class="log">(</span>/\/static/gm, ""<span class="log">)</span><span class="log">)</span><span class="log">)</span><span class="log">)</span></code><code data-key='xmp'>    <span class="log">.</span>pipe<span class="log">(</span>inject<span class="log">(</span>src<span class="log">(</span>[<span class="string">"./dist/css/*.css"</span>, <span class="string">"./dist/js/*.js"</span>]<span class="log">)</span>, <span class="log">{</span> relative<span class="colonColor">: </span><span class="typeColor">true <span class="log">}</span><span class="log">)</span></span><span class="log">)</span></code><code data-key='xmp'>    <span class="log">.</span>pipe<span class="log">(</span>htmlMin<span class="log">(</span><span class="log">{</span> collapseWhitespace<span class="colonColor"><span class="colonColor">: </span><span class="typeColor"></span><span class="typeColor">true <span class="log">}</span></span><span class="log">)</span></span><span class="log">)</span></code><code data-key='xmp'>    <span class="log">.</span>pipe<span class="log">(</span>dest<span class="log">(</span><span class="string">"./dist/"</span><span class="log">)</span><span class="log">)</span><span class="log">.</span><span class="title1">on</span><span class="log">(</span><span class="string">"end"</span>, done<span class="log">)</span></code><code data-key='xmp'><span class="log">}</span></code><code data-key='xmp'><span class="let">const </span>isLess <span class="let">=</span> <span class="log">(</span>file<span class="log">)</span><span class="log"> => </span>file<span class="log">.</span><span class="title1">extname</span> <span class="let">===</span> <span class="string">".less"</span></code><code data-key='xmp'><span class="let">const </span>buildCss <span class="let">=</span> <span class="log">(</span>done<span class="log">)</span><span class="log"> => </span><span class="log">{</span></code><code data-key='xmp'>    <span class="let">return</span> <span class="title">src<span class="log">(</span></span><span class="string">"./src/static/stylesheets/*.{less,css}"</span><span class="log">)</span></code><code data-key='xmp'>        <span class="log">.</span>pipe<span class="log">(</span>gulpIf<span class="log">(</span>isLess, <span class="title">less<span class="log">(</span></span><span class="log">)</span><span class="log">)</span><span class="log">)</span></code><code data-key='xmp'>        <span class="log">.</span>pipe<span class="log">(</span>minifyCSS<span class="log">(</span><span class="log">)</span><span class="log">)</span></code><code data-key='xmp'>        <span class="log">.</span>pipe<span class="log">(</span>rename<span class="log">(</span><span class="log">{</span> extname: <span class="string">".min.css"</span> <span class="log">}</span><span class="log">)</span><span class="log">)</span></code><code data-key='xmp'>        <span class="log">.</span>pipe<span class="log">(</span>dest<span class="log">(</span><span class="string">"./dist/css/"</span><span class="log">)</span><span class="log">)</span><span class="log">.</span><span class="title1">on</span><span class="log">(</span><span class="string">"end"</span>, done<span class="log">)</span>;</code><code data-key='xmp'><span class="log">}</span></code><code data-key='xmp'><span class="let">const </span>buildJs <span class="let">=</span> <span class="log">(</span>done<span class="log">)</span><span class="log"> => </span><span class="log">{</span></code><code data-key='xmp'>    <span class="let">return</span> <span class="title">src<span class="log">(</span></span>[<span class="string">"./src/static/js/*.js"</span>, <span class="string">"./src/static/js/*.ts"</span>]<span class="log">)</span></code><code data-key='xmp'>        <span class="log">.</span>pipe<span class="log">(</span>tsProject<span class="log">(</span><span class="log">)</span><span class="log">)</span></code><code data-key='xmp'>        <span class="log">.</span>pipe<span class="log">(</span>babel<span class="log">(</span><span class="log">{</span> presets: [<span class="string">"@babel/preset-env"</span>] <span class="log">}</span><span class="log">)</span><span class="log">)</span></code><code data-key='xmp'>        <span class="log">.</span>pipe<span class="log">(</span>uglify<span class="log">(</span><span class="log">)</span><span class="log">)</span></code><code data-key='xmp'>        <span class="log">.</span>pipe<span class="log">(</span>rename<span class="log">(</span><span class="log">{</span> extname: <span class="string">".min.js"</span> <span class="log">}</span><span class="log">)</span><span class="log">)</span></code><code data-key='xmp'>        <span class="log">.</span>pipe<span class="log">(</span>dest<span class="log">(</span><span class="string">"./dist/js/"</span><span class="log">)</span><span class="log">)</span><span class="log">.</span><span class="title1">on</span><span class="log">(</span><span class="string">"end"</span>, done<span class="log">)</span>;</code><code data-key='xmp'><span class="log">}</span></code><code data-key='xmp'><span class="let">const </span>clean <span class="let">=</span> <span class="log">(</span>done, output<span class="log">)</span><span class="log"> => </span><span class="log">{</span></code><code data-key='xmp'>    output <span class="let">=</span> output<span class="let"> || </span>path<span class="log">.</span><span class="title1">resolve</span><span class="log">(</span>__dirname, <span class="string">"./dist"</span><span class="log">)</span>;</code><code data-key='xmp'>    if <span class="log">(</span>fs<span class="log">.</span><span class="title1">existsSync</span><span class="log">(</span>output<span class="log">)</span><span class="log">)</span> <span class="log">{</span></code><code data-key='xmp'>        fs<span class="log">.</span><span class="title1">readdirSync</span><span class="log">(</span>output<span class="log">)</span><span class="log">.</span><span class="title1">forEach</span><span class="log">(</span>file<span class="log"> => </span><span class="log">{</span></code><code data-key='xmp'><span class="let">            let </span>dir <span class="let">=</span> output <span class="let">+</span> <span class="string">"/"</span> <span class="let">+</span> file;</code><code data-key='xmp'>            if <span class="log">(</span>fs<span class="log">.</span><span class="title1">statSync</span><span class="log">(</span>dir<span class="log">)</span><span class="log">.</span><span class="title1">isDirectory</span><span class="log">(</span><span class="log">)</span><span class="log">)</span> <span class="log">{</span></code><code data-key='xmp'>                <span class="title">clean<span class="log">(</span></span><span class='keyword'>null</span>, dir<span class="log">)</span>;</code><code data-key='xmp'>            <span class="log">}</span> else <span class="log">{</span></code><code data-key='xmp'>                fs<span class="log">.</span><span class="title1">unlinkSync</span><span class="log">(</span>dir<span class="log">)</span>;</code><code data-key='xmp'>            <span class="log">}</span></code><code data-key='xmp'>        <span class="log">}</span><span class="log">)</span>;</code><code data-key='xmp'>        fs<span class="log">.</span><span class="title1">rmdirSync</span><span class="log">(</span>output<span class="log">)</span>;</code><code data-key='xmp'>    <span class="log">}</span></code><code data-key='xmp'>    <span class="log">(</span>done <span class="let">&</span><span class="let">&</span> <span class="title">done<span class="log">(</span></span><span class="log">)</span><span class="log">)</span></code><code data-key='xmp'><span class="log">}</span></code><code data-key='xmp'><span class="let">const </span>buildImg <span class="let">=</span> <span class="log">(</span>done<span class="log">)</span><span class="log"> => </span><span class="log">{</span></code><code data-key='xmp'>    <span class="let">return</span> <span class="title">src<span class="log">(</span></span><span class="string">"./src/static/assets/img/*.{png,jpg,jpeg,gif}"</span><span class="log">)</span><span class="log">.</span><span class="title1">pipe</span><span class="log">(</span>imagemin<span class="log">(</span><span class="log">)</span><span class="log">)</span><span class="log">.</span><span class="title1">pipe</span><span class="log">(</span>dest<span class="log">(</span><span class="string">"./dist/assets/img/"</span><span class="log">)</span><span class="log">)</span><span class="log">.</span><span class="title1">on</span><span class="log">(</span><span class="string">"end"</span>, done<span class="log">)</span>;</code><code data-key='xmp'><span class="log">}</span></code><code data-key='xmp'>exports<span class="log">.</span><span class="title1">default</span> <span class="let">=</span> <span class="title">series<span class="log">(</span></span>clean, buildImg, <span class="title">parallel<span class="log">(</span></span>buildCss, buildJs<span class="log">)</span>, buildHtml<span class="log">)</span>;</code><code data-key='xmp'><span class="green">//inject需要在html中标注位置</span></code><code data-key='xmp'><span class="green">//css</span></code><code data-key='xmp'><span class='angleBracket'>&lt;</span><span class='elName'>!--inject:css--</span><span class='angleBracket'>&gt;</span></code><code data-key='xmp'><span class='angleBracket'>&lt;</span><span class='elName'>--endinject--</span><span class='angleBracket'>&gt;</span></code><code data-key='xmp'><span class="green">//js</span></code><code data-key='xmp'><span class='angleBracket'>&lt;</span><span class='elName'>!--inject:js--</span><span class='angleBracket'>&gt;</span></code><code data-key='xmp'><span class='angleBracket'>&lt;</span><span class='elName'>--endinject--</span><span class='angleBracket'>&gt;</span></code></div></pre><img class="uploadImg" data-key="img" src="http://localhost:8096/upload/8dewbamb1zcx0aaaaasuvork5cyii304.png"/><img class="uploadImg" data-key="img" src="http://localhost:8096/upload/81mef1zehqmgaaaabjru5erkjggg925.png"/>
                </div>
                <div class="rightDraw">
                <div class="menu"><div class="directory">目录</div><ul class="menuCon"><li class="menu_li"><a href="#gulp使用" id="NX347421" class="">gulp使用</a><ul class="menuCon_1"><li class="menu_li0"><a href="#环境配置" id="AE193560" class="">环境配置</a></li><li class="menu_li1"><a href="#基本使用" id="Ij756595">基本使用</a></li><li class="menu_li2"><a href="#完整的" id="Ze147215" class="">完整的</a></li></ul></li></ul></div>
                </div>
              </div>
           </div>
           <svg t="1648304059372" class="icon up" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3132" width="200" height="200"><path d="M832 64 192 64C121.6 64 64 121.6 64 192l0 640c0 70.4 57.6 128 128 128l640 0c70.4 0 128-57.6 128-128L960 192C960 121.6 902.4 64 832 64zM762.24 759.04c-12.8 12.8-33.28 12.8-45.44 0L513.92 560l-202.24 199.04c-12.8 12.8-33.28 12.8-45.44 0-12.8-12.8-12.8-32.64 0-45.44l224-220.16c6.4-6.4 15.36-9.6 24.32-8.96C522.88 483.84 531.2 487.04 538.24 493.44l224 220.16C775.04 726.4 775.04 746.24 762.24 759.04zM762.24 503.04c-12.8 12.8-33.28 12.8-45.44 0L513.92 304 311.68 503.04c-12.8 12.8-33.28 12.8-45.44 0-12.8-12.8-12.8-32.64 0-45.44l224-220.16c6.4-6.4 15.36-9.6 24.32-8.96C522.88 227.84 531.2 231.04 538.24 237.44l224 220.16C775.04 470.4 775.04 490.24 762.24 503.04z" p-id="3133" fill="#ffffff"></path></svg>
        </div>
        </body>
           <script>let titles = [{"title":"gulp使用","id":"gulp使用","index":2,"class":"NX347421","children":[{"title":"环境配置","id":"环境配置","index":3,"class":"AE193560"},{"title":"基本使用","id":"基本使用","index":3,"class":"Ij756595"},{"title":"完整的","id":"完整的","index":3,"class":"Ze147215"}]}];</script>
           <script src="../index.js" type="text/javascript"></script>
           </html>
            