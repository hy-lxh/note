
        <!DOCTYPE html>
         <html lang="en">
         <head>
	     <meta charset="UTF-8">
         <meta name="keywords" content="nginx代理,博客,前端"/>
         <meta name="description" content="nginx方向代理笔记"/>
         <!--<meta http-equiv="content-security-policy" content="default-src self"/>-->
	     <title>nginx代理</title>
        </head>
        <link rel="stylesheet" href="../main.css">
        <body>
        <div class="message_box"></div>
        <div class="content">
           <div id="view">
              <div>
                <div class="bs_content">
                   <h3 id='nginx' class='NY930643'>nginx</h3><h4 id='下载和启动' class='jb221563'>下载和启动</h4><p class="indent">CentOS系统自带<span class="highlight">yum</span>,通过它这里直接下载<span class="highlight">nginx</span>,具体命令如下:</p><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div class='indexPre'><div class='index'>1.</div><div class='index'>2.</div><div class='index'>3.</div><div class='index'>4.</div></div><div class="codePre"><code data-key='xmp'><span class="green">//下载nginx</span></code><code data-key='xmp'>yum install nginx</code><code data-key='xmp'><span class="green">//启动</span></code><code data-key='xmp'>nginx <span class="green">//直接启动，然后通过公网ip就可以获取到nginx的页面了</span></code></div></pre><h4 id='配置' class='eY946814'>配置</h4><p class="indent">nginx下载完成以后的主要存储位置在<span class="highlight">/etc/nginx</span>,这个是nginx配置文件存储的位置,<span class="highlight">/usr/share/nginx</span>,这个主要放前端项目的地方</p><div style='height: 14px;'></div><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div class='indexPre'><div class='index'>1.</div><div class='index'>2.</div><div class='index'>3.</div><div class='index'>4.</div><div class='index'>5.</div><div class='index'>6.</div><div class='index'>7.</div><div class='index'>8.</div><div class='index'>9.</div><div class='index'>10.</div><div class='index'>11.</div><div class='index'>12.</div><div class='index'>13.</div><div class='index'>14.</div><div class='index'>15.</div><div class='index'>16.</div><div class='index'>17.</div><div class='index'>18.</div><div class='index'>19.</div><div class='index'>20.</div><div class='index'>21.</div></div><div class="codePre"><code data-key='xmp'><span class="green">//主要的配置文件就存在/etc/nginx/nginx<span class="log">.</span><span class="title1">conf</span></span></code><code data-key='xmp'><span class="green">//通过下图中红框的include可设置具体的配置文件路径以及文件名特征</span></code><code data-key='xmp'><span class="green">//像图片中的include是说,所有conf<span class="log">.</span><span class="title1">d</span>下面以conf为后缀的文件都是配置文件</span></code><code data-key='xmp'><span class="green">//下面server表示配置服务</span></code><code data-key='xmp'><span class="green">//listen监听端口,默认80</span></code><code data-key='xmp'><span class="green">//root表示访问80端口的时候映射哪的文件给客户端</span></code><code data-key='xmp'> </code><code data-key='xmp'><span class="green">//可以自己在conf<span class="log">.</span><span class="title1">d</span>目录下新建一个配置文件名test<span class="log">.</span><span class="title1">conf</span></span></code><code data-key='xmp'><span class="green">//内容就可以和下图差不多开辟一个端口指向自己的项目</span></code><code data-key='xmp'>server <span class="log">{</span></code><code data-key='xmp'>  listen  8086;</code><code data-key='xmp'>  server_name  域名,没有就用_;</code><code data-key='xmp'>  root /usr/share/nginx/dist</code><code data-key='xmp'>  <span class="green">//单页面应用必须设置, 不然会导致刷新404问题</span></code><code data-key='xmp'>  location /<span class="log">{</span></code><code data-key='xmp'>    try_files  $uri $uri/ /index<span class="log">.</span><span class="title1">html</span></code><code data-key='xmp'>  <span class="log">}</span></code><code data-key='xmp'><span class="log">}</span></code><code data-key='xmp'> </code><code data-key='xmp'><span class="green">//配置完成以后保存通过nginx <span class="let">-</span>s reload重启nginx</span></code><code data-key='xmp'><span class="green">//这事可能还不能访问还需要在服务器上添加上安全端口</span></code></div></pre><img class="uploadImg" data-key="img" src="./imgs/upload_7f1a9189d34d3b1d246185c1eca64a5f.png"/><h4 id='其它命令' class='YY646442'>其它命令</h4><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div class='indexPre'><div class='index'>1.</div><div class='index'>2.</div><div class='index'>3.</div><div class='index'>4.</div><div class='index'>5.</div><div class='index'>6.</div><div class='index'>7.</div></div><div class="codePre"><code data-key='xmp'>systemctl start firewalld <span class="green">//开启防火墙</span></code><code data-key='xmp'>systemctl stop firewalld <span class="green">//关闭防火墙</span></code><code data-key='xmp'>systemctl status firewalld<span class="green">//查看防火墙状态</span></code><code data-key='xmp'>firewalld<span class="let">-</span>cmd <span class="let">-</span><span class="let">-</span>reload <span class="green">//重启防火墙</span></code><code data-key='xmp'>firewalld<span class="let">-</span>cmd <span class="let">-</span><span class="let">-</span>list<span class="let">-</span>all <span class="green">//查看所有防火墙</span></code><code data-key='xmp'>firewalld<span class="let">-</span>cmd <span class="let">-</span><span class="let">-</span>premanent <span class="let">-</span><span class="let">-</span>zone=public <span class="let">-</span><span class="let">-</span>add<span class="let">-</span>port=8888/tcp <span class="green">//<span class="let">-</span><span class="let">-</span>premanent表示永久打开防火墙</span></code><code data-key='xmp'>systemtcl enable nginx <span class="green">//nginx开机自启</span></code></div></pre><div style='height: 14px;'></div><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div class='indexPre'><div class='index'>1.</div><div class='index'>2.</div><div class='index'>3.</div><div class='index'>4.</div><div class='index'>5.</div></div><div class="codePre"><code data-key='xmp'>nginx <span class="let">-</span>s reload <span class="green">//开启热重启</span></code><code data-key='xmp'>nginx <span class="let">-</span>s reopen <span class="green">//重启</span></code><code data-key='xmp'>nginx <span class="let">-</span>s stop <span class="green">//关闭</span></code><code data-key='xmp'>nginx <span class="let">-</span>s quit <span class="green">//退出</span></code><code data-key='xmp'>nginx <span class="let">-</span>T <span class="green">//查看nginx的最终配置</span></code></div></pre><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div class='indexPre'><div class='index'>1.</div><div class='index'>2.</div><div class='index'>3.</div><div class='index'>4.</div><div class='index'>5.</div><div class='index'>6.</div><div class='index'>7.</div><div class='index'>8.</div></div><div class="codePre"><code data-key='xmp'><span class="green">//添加请求头</span></code><code data-key='xmp'>server <span class="log">{</span></code><code data-key='xmp'>  add_header 'Access<span class="let">-</span>Control<span class="let">-</span>Allow<span class="let">-</span>Origin' $http_origin; <span class="green">//设置请求源</span></code><code data-key='xmp'>  add_header 'Access<span class="let">-</span>Control<span class="let">-</span>Allow<span class="let">-</span>Headers' $http_control_allow_headers;<span class="green">//允许携带的请求头</span></code><code data-key='xmp'>  add_header 'Access<span class="let">-</span>Control<span class="let">-</span>Allow<span class="let">-</span>Methods' 'Post,GET,Put,Delete';<span class="green">//允许请求的方法</span></code><code data-key='xmp'>  add_header 'Acces<span class="let">-</span>Control<span class="let">-</span>Expose<span class="let">-</span>Headers' 'Content<span class="let">-</span>Type, Content<span class="let">-</span>Range';</code><code data-key='xmp'>  add_header 'Access<span class="let">-</span>Control<span class="let">-</span>Allow<span class="let">-</span>Credentials' 'true'<span class="green">//是否允许携带cookie</span></code><code data-key='xmp'><span class="log">}</span></code></div></pre><div style='height: 14px;'></div><h4 id='设置跨域' class='dG105319'>设置跨域</h4><pre class='code' data-key='pre'>
                        <div class="code_header">
                          <div class="circle">
                           <div class="circle1"></div>
                           <div class="circle2"></div>
                           <div class="circle3"></div>
                          </div>
                          <svg title="复制" t="1649216860822" class="copy_code icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3280" width="24" height="24"><path d="M441.47 537.05h186.18v59.22H441.47zM441.47 671.04h280.56v59.22H441.47z" p-id="3281"></path><path d="M685.92 217.95c-0.62-0.65-1.27-1.25-1.93-1.84l-6.85-7.18h-9.52a29.56 29.56 0 0 0-6.31 0h-59.93l1.81-1.73-86.3-90.62H221.06a60.21 60.21 0 0 0-60.15 60.15V742.1a60.21 60.21 0 0 0 60.15 60.15h100.11v32.2a60.21 60.21 0 0 0 60.15 60.15h440.82a60.21 60.21 0 0 0 60.15-60.15V424L746.8 282z m93.95 184.69l-92.81-4.54a0.85 0.85 0 0 1-0.6-0.93l4.25-88.22 12.61 13.22zM221.06 743a1 1 0 0 1-0.93-0.93V176.73a1 1 0 0 1 0.93-0.93h270.45l31.55 33.13H381.32a60.21 60.21 0 0 0-60.15 60.15V743z m601.09 92.35H381.32a1 1 0 0 1-0.93-0.93V269.08a1 1 0 0 1 0.93-0.93h252.07l-6.08 126.27v0.12c-1.46 33.12 24.17 61.25 57 62.71L823.07 464v370.45a1 1 0 0 1-0.93 0.93z" p-id="3282"></path></svg>
                        </div>
                        <div class='indexPre'><div class='index'>1.</div><div class='index'>2.</div><div class='index'>3.</div><div class='index'>4.</div><div class='index'>5.</div><div class='index'>6.</div><div class='index'>7.</div></div><div class="codePre"><code data-key='xmp'>server <span class="log">{</span></code><code data-key='xmp'>  listen 80;</code><code data-key='xmp'>  server_name balabala<span class="log">.</span><span class="title1">com</span>;</code><code data-key='xmp'>  location / <span class="log">{</span></code><code data-key='xmp'>    proxy_pass your_proxy<span class="log">.</span><span class="title1">com</span>;</code><code data-key='xmp'>  <span class="log">}</span></code><code data-key='xmp'><span class="log">}</span></code></div></pre><div style='height: 14px;'></div>
                </div>
                <div class="rightDraw">
                <div class="menu"><div class="directory">目录</div><ul class="menuCon"><li class="menu_li"><a href="#nginx" id="NY930643">nginx</a><ul class="menuCon_1"><li class="menu_li0"><a href="#下载和启动" id="jb221563">下载和启动</a></li><li class="menu_li1"><a href="#配置" id="eY946814">配置</a></li><li class="menu_li2"><a href="#其它命令" id="YY646442">其它命令</a></li><li class="menu_li3"><a href="#设置跨域" id="dG105319">设置跨域</a></li></ul></li></ul></div>
                </div>
              </div>
           </div>
           <svg t="1648304059372" class="icon up" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3132" width="200" height="200"><path d="M832 64 192 64C121.6 64 64 121.6 64 192l0 640c0 70.4 57.6 128 128 128l640 0c70.4 0 128-57.6 128-128L960 192C960 121.6 902.4 64 832 64zM762.24 759.04c-12.8 12.8-33.28 12.8-45.44 0L513.92 560l-202.24 199.04c-12.8 12.8-33.28 12.8-45.44 0-12.8-12.8-12.8-32.64 0-45.44l224-220.16c6.4-6.4 15.36-9.6 24.32-8.96C522.88 483.84 531.2 487.04 538.24 493.44l224 220.16C775.04 726.4 775.04 746.24 762.24 759.04zM762.24 503.04c-12.8 12.8-33.28 12.8-45.44 0L513.92 304 311.68 503.04c-12.8 12.8-33.28 12.8-45.44 0-12.8-12.8-12.8-32.64 0-45.44l224-220.16c6.4-6.4 15.36-9.6 24.32-8.96C522.88 227.84 531.2 231.04 538.24 237.44l224 220.16C775.04 470.4 775.04 490.24 762.24 503.04z" p-id="3133" fill="#ffffff"></path></svg>
        </div>
        </body>
           <script>let titles = [{"title":"nginx","id":"nginx","index":3,"class":"NY930643","children":[{"title":"下载和启动","id":"下载和启动","index":4,"class":"jb221563"},{"title":"配置","id":"配置","index":4,"class":"eY946814"},{"title":"其它命令","id":"其它命令","index":4,"class":"YY646442"},{"title":"设置跨域","id":"设置跨域","index":4,"class":"dG105319"}]}];</script>
           <script src="../index.js" type="text/javascript"></script>
           </html>
            